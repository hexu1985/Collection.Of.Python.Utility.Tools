var _excluded=["dialogSelector","formSelector","tableSelector","tabSelector","click","area","find","useText","ignoreAttributes","ignoreClasses"],_excluded2=["ignoreQuerys","domAttributes"],_excluded3=["ignoreQuerys","domAttributes"],_globalThis=function(e){function t(){var t=this||self;return delete e.prototype.__magic__,t}return"object"==typeof globalThis?globalThis:this?t():(e.defineProperty(e.prototype,"__magic__",{configurable:!0,get:t}),__magic__)}(Object);function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=Object.create((t&&t.prototype instanceof d?t:d).prototype),i=new E(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,i),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var l={};function d(){}function f(){}function h(){}var p={};s(p,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(x([])));v&&v!==t&&r.call(v,o)&&(p=v);var g=h.prototype=d.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(o,i,a,s){var c=u(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==_typeof(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=h,s(g,"constructor",h),s(h,"constructor",f),f.displayName=s(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){asyncGeneratorStep(i,n,o,a,s,"next",e)}function s(e){asyncGeneratorStep(i,n,o,a,s,"throw",e)}a(void 0)}))}}function _objectWithoutProperties(e,t){if(null==e)return{};var r,n,o=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t.indexOf(r=i[n])>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t.indexOf(r=i[n])>=0||(o[r]=e[r]);return o}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=void 0!==_globalThis?_globalThis:e||self).AutoTrack=t()}(this,(function(){"use strict";var e={omui:{classSuffix:"",click:[".omui-button",".omui-radio",".omui-input__inner",".omui-checkbox",".omui-dropdown__trigger",".omui-dropdown__item",".omui-tab__label",".omui-textarea",".omui-datepicker-input",".omui-icon-clear-reverse",".omui-thumb",".omui-select__input",".omui-select__item",".omui-swiper",".omui-suggestion__control",".omui-suggestion__option",".omui-upload-normal-trigger",".omui-upload-image-trigger",".omui-upload-container-wrap"],area:[".omui-panel",".omui-form__group",".omui-table-table",".omui-tooltip__content"],dialogSelector:".omui-dialog",formSelector:[".omui-form__group",".omui-filter__group"],tableSelector:".omui-table-table",tabSelector:[".omui-tab__content",".omui-tab"],find:{".omui-panel":".omui-panel__title",".omui-dialog":".omui-dialog-header",".omui-tab__content":function(e){return e.parentNode.querySelector(".omui-tab__label.is--active")},".omui-tab":".omui-tab__label.is--active"},useText:[".omui-button",".omui-radio",".omui-checkbox",".omui-dropdown__item",".omui-tab__label",".omui-select__item",".omui-suggestion__option"],ignoreAttributes:["_nk"],ignoreClasses:["is--"]},antd:{classSuffix:"",click:[".ant-menu-item",".ant-menu-submenu-title",".ant-input",".ant-btn",".ant-checkbox-wrapper",".ant-cascader",".ant-cascader-menu-item",".ant-radio-wrapper",".ant-select",".ant-select-item",".ant",".ant-upload",".ant-tabs-tab",".ant-picker"],area:[".ant-tabs-tabpane",".ant-card",".ant-list",".ant-form-item",".ant-table",".ant-tooltip-inner",".ant-notification",".ant-drawer-content-wrapper"],dialogSelector:[".ant-modal-content",".ant-notification",".ant-drawer-content"],formSelector:".ant-form-item",tableSelector:".ant-table",tabSelector:".ant-tabs",find:{".ant-tabs":".ant-tabs-tab-active",".ant-tabs-tabpane":function(e){return e.closest(".ant-tabs").querySelector(".ant-tabs-tab-active")},".ant-card":".ant-card-head-title",".ant-list":".ant-list-header",".ant-modal-content":".ant-modal-title",".ant-drawer-content":".ant-drawer-title",".ant-form-item":".ant-form-item-label label",".ant-drawer-content-wrapper":".ant-drawer-title"},useText:[".ant-menu-item",".ant-menu-submenu-title",".ant-tabs-tab",".ant-btn",".ant-checkbox-wrapper",".ant-cascader-menu-item",".ant-radio-wrapper",".ant-select-item"],ignoreClasses:["-active","-selected"]},element:{classSuffix:"",click:[".el-radio",".el-input",".el-checkbox",".el-input-number",".el-cascader",".el-dropdown",".el-tabs__item",".el-textarea",".el-date-editor",".el-switch",".el-select",".el-slider__button",".el-upload"],area:[".el-tabs",".el-table",".el-form"],dialogSelector:".el-dialog",formSelector:[".el-form"],tableSelector:".el-table",tabSelector:".el-tabs__content",find:{".el-tabs":".el-tabs__item",".el-form":".el-form-item__label"}},antdm:{classSuffix:"",click:[".adm-input",".adm-button",".adm-checkbox",".adm-cascader",".adm-picker",".adm-radio",".adm-switch",".adm-image-uploader",".adm-tabs-tab",".adm-tab-bar",".adm-dropdown-item",".adm-selector-item",".adm-text-area",".adm-calendar-cell",".adm-action-sheet-button-item-wrapper",".adm-capsule-tabs-tab",".adm-list-item"],area:[".adm-card",".adm-tabs",".adm-form",".adm-list",".adm-picker-body",".adm-popup-body"],dialogSelector:[".adm-dialog-wrap",".adm-toast-main",".adm-popup-body"],formSelector:".adm-form-item",tableSelector:"",tabSelector:".adm-tabs",find:{".adm-card":".adm-card-header-title",".adm-tabs":".adm-tabs-tab-active .adm-tabs-tab",".adm-dialog-wrap":".adm-dialog-title",".adm-form-item":".adm-form-item-label label"},useText:[".adm-tabs-tab",".adm-selector-item",".adm-button",".adm-dropdown-item",".adm-capsule-tabs-tab",".adm-checkbox"]},tdesign:{classSuffix:"",click:[".t-button",".t-menu__item",".t-input",".t-checkbox",".t-radio",".t-radio-button",".t-select",".t-select-option",".t-anchor__item",".t-dropdown__item",".t-breadcrumb__item",".t-tabs__nav-item",".t-tabs__btn",".t-date-picker__cell",".t-switch",".t-textarea",".t-tree__item",".t-swiper__arrow-left",".t-swiper__arrow-right",".t-icon-close",".t-icon-browse",".t-icon-add",".t-icon-delete"],area:[".t-table",".t-form",".t-steps",".t-list",".t-tooltip",".t-tab-panel",".t-cascader__panel",".t-date-picker__panel",".t-tree",".t-select__dropdown",".t-transfer",".t-time-picker__panel",".t-swiper__content",".t-alert",".t-dialog",".t-drawer__content-wrapper",".t-message",".t-popconfirm"],dialogSelector:[".t-dialog",".t-drawer__content-wrapper",".t-popconfirm"],formSelector:".t-form__item",tableSelector:".t-table",tabSelector:".t-tab-panel",find:{".t-tab-panel":function(e){return e.closest(".t-tabs").querySelector(".t-tabs__header .t-is-active")},".t-list":".t-list__header",".t-dialog":".t-dialog__header",".t-drawer__content-wrapper":".t-drawer__header",".t-notification":".t-notification__title",".t-popconfirm":".t-popconfirm__inner",".t-tabs":".t-tabs__nav-item.t-is-active .t-tabs__nav-item-text-wrapper",".t-form__item":".t-form__label label"},useText:[".t-button",".t-menu__item",".t-checkbox",".t-radio",".t-radio-button",".t-select-option",".t-anchor__item",".t-dropdown__item",".t-breadcrumb__item",".t-tabs__nav-item",".t-tree__item",".t-drawer__header",".t-popconfirm__inner"],ignoreClasses:["-is-"]},supportedLib:["omui","antd","element","antdm","tdesign"]};!function(){if("object"===("undefined"==typeof window?"undefined":_typeof(window)))if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var e=function(e){for(var t=window.document,r=o(t);r;)r=o(t=r.ownerDocument);return t}(),t=[],r=null,n=null;a.prototype.THROTTLE_TIMEOUT=100,a.prototype.POLL_INTERVAL=null,a.prototype.USE_MUTATION_OBSERVER=!0,a._setupCrossOriginUpdater=function(){return r||(r=function(e,r){n=e&&r?d(e,r):{top:0,bottom:0,left:0,right:0,width:0,height:0},t.forEach((function(e){e._checkForIntersections()}))}),r},a._resetCrossOriginUpdater=function(){r=null,n=null},a.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(e.ownerDocument),this._checkForIntersections()}},a.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._unmonitorIntersections(e.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},a.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},a.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},a.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,r){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==r[t-1]}))},a.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},a.prototype._monitorIntersections=function(t){var r=t.defaultView;if(r&&-1==this._monitoringDocuments.indexOf(t)){var n=this._checkForIntersections,i=null,a=null;if(this.POLL_INTERVAL?i=r.setInterval(n,this.POLL_INTERVAL):(s(r,"resize",n,!0),s(t,"scroll",n,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in r&&(a=new r.MutationObserver(n)).observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push((function(){var e=t.defaultView;e&&(i&&e.clearInterval(i),c(e,"resize",n,!0)),c(t,"scroll",n,!0),a&&a.disconnect()})),t!=(this.root&&(this.root.ownerDocument||this.root)||e)){var u=o(t);u&&this._monitorIntersections(u.ownerDocument)}}},a.prototype._unmonitorIntersections=function(t){var r=this._monitoringDocuments.indexOf(t);if(-1!=r){var n=this.root&&(this.root.ownerDocument||this.root)||e,i=this._observationTargets.some((function(e){var r=e.element.ownerDocument;if(r==t)return!0;for(;r&&r!=n;){var i=o(r);if((r=i&&i.ownerDocument)==t)return!0}return!1}));if(!i){var a=this._monitoringUnsubscribes[r];if(this._monitoringDocuments.splice(r,1),this._monitoringUnsubscribes.splice(r,1),a(),t!=n){var s=o(t);s&&this._unmonitorIntersections(s.ownerDocument)}}}},a.prototype._unmonitorAllIntersections=function(){var e=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var t=0;t<e.length;t++)e[t]()},a.prototype._checkForIntersections=function(){if(this.root||!r||n){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(n){var o=n.element,a=u(o),s=this._rootContainsTarget(o),c=n.entry,l=e&&s&&this._computeTargetAndRootIntersection(o,a,t),d=null;this._rootContainsTarget(o)?r&&!this.root||(d=t):d={top:0,bottom:0,left:0,right:0,width:0,height:0};var f=n.entry=new i({time:window.performance&&performance.now&&performance.now(),target:o,boundingClientRect:a,rootBounds:d,intersectionRect:l});c?e&&s?this._hasCrossedThreshold(c,f)&&this._queuedEntries.push(f):c&&c.isIntersecting&&this._queuedEntries.push(f):this._queuedEntries.push(f)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},a.prototype._computeTargetAndRootIntersection=function(t,o,i){if("none"!=window.getComputedStyle(t).display){for(var a,s,c,l,f,p,m,v,g=o,y=h(t),b=!1;!b&&y;){var w=null,_=1==y.nodeType?window.getComputedStyle(y):{};if("none"==_.display)return null;if(y==this.root||9==y.nodeType)if(b=!0,y==this.root||y==e)r&&!this.root?!n||0==n.width&&0==n.height?(y=null,w=null,g=null):w=n:w=i;else{var S=h(y),E=S&&u(S),x=S&&this._computeTargetAndRootIntersection(S,E,i);E&&x?(y=S,w=d(E,x)):(y=null,g=null)}else{var k=y.ownerDocument;y!=k.body&&y!=k.documentElement&&"visible"!=_.overflow&&(w=u(y))}if(w&&(a=w,s=g,c=void 0,l=void 0,f=void 0,p=void 0,m=void 0,v=void 0,c=Math.max(a.top,s.top),l=Math.min(a.bottom,s.bottom),f=Math.max(a.left,s.left),p=Math.min(a.right,s.right),v=l-c,g=(m=p-f)>=0&&v>=0&&{top:c,bottom:l,left:f,right:p,width:m,height:v}||null),!g)break;y=y&&h(y)}return g}},a.prototype._getRootRect=function(){var t;if(this.root&&!p(this.root))t=u(this.root);else{var r=p(this.root)?this.root:e,n=r.documentElement,o=r.body;t={top:0,left:0,right:n.clientWidth||o.clientWidth,width:n.clientWidth||o.clientWidth,bottom:n.clientHeight||o.clientHeight,height:n.clientHeight||o.clientHeight}}return this._expandRectByRootMargin(t)},a.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,r){return"px"==t.unit?t.value:t.value*(r%2?e.width:e.height)/100})),r={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return r.width=r.right-r.left,r.height=r.bottom-r.top,r},a.prototype._hasCrossedThreshold=function(e,t){var r=e&&e.isIntersecting?e.intersectionRatio||0:-1,n=t.isIntersecting?t.intersectionRatio||0:-1;if(r!==n)for(var o=0;o<this.thresholds.length;o++){var i=this.thresholds[o];if(i==r||i==n||i<r!=i<n)return!0}},a.prototype._rootIsInDom=function(){return!this.root||f(e,this.root)},a.prototype._rootContainsTarget=function(t){var r=this.root&&(this.root.ownerDocument||this.root)||e;return f(r,t)&&(!this.root||r==t.ownerDocument)},a.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},a.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=a,window.IntersectionObserverEntry=i}function o(e){try{return e.defaultView&&e.defaultView.frameElement||null}catch(t){return null}}function i(e){this.time=e.time,this.target=e.target,this.rootBounds=l(e.rootBounds),this.boundingClientRect=l(e.boundingClientRect),this.intersectionRect=l(e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,r=t.width*t.height,n=this.intersectionRect;this.intersectionRatio=r?Number((n.width*n.height/r).toFixed(4)):this.isIntersecting?1:0}function a(e,t){var r,n,o,i=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(i.root&&1!=i.root.nodeType&&9!=i.root.nodeType)throw new Error("root must be a Document or Element");this._checkForIntersections=(r=this._checkForIntersections.bind(this),n=this.THROTTLE_TIMEOUT,o=null,function(){o||(o=setTimeout((function(){r(),o=null}),n))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(i.rootMargin),this.thresholds=this._initThresholds(i.threshold),this.root=i.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function s(e,t,r,n){"function"==typeof e.addEventListener?e.addEventListener(t,r,n||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,r)}function c(e,t,r,n){"function"==typeof e.removeEventListener?e.removeEventListener(t,r,n||!1):"function"==typeof e.detachEvent&&e.detachEvent("on"+t,r)}function u(e){var t;try{t=e.getBoundingClientRect()}catch(r){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function l(e){return!e||"x"in e?e:{top:e.top,y:e.top,bottom:e.bottom,left:e.left,x:e.left,right:e.right,width:e.width,height:e.height}}function d(e,t){var r=t.top-e.top,n=t.left-e.left;return{top:r,left:n,height:t.height,width:t.width,bottom:r+t.height,right:n+t.width}}function f(e,t){for(var r=t;r;){if(r==e)return!0;r=h(r)}return!1}function h(t){var r=t.parentNode;return 9==t.nodeType&&t!=e?o(t):(r&&r.assignedSlot&&(r=r.assignedSlot.parentNode),r&&11==r.nodeType&&r.host?r.host:r)}function p(e){return e&&9===e.nodeType}}();var t=function(e){return(e||"").split("").reduce((function(e,t){return t.charCodeAt(0)+(e<<6)+(e<<16)-e}),0)},r={throttle:function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=Date.now();return function(){for(var i=this,a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];clearTimeout(t);var u=function(){o=Date.now(),t=null,e.apply(i,s)};(r=Date.now()-o)>n?u():t=setTimeout(u,n-r)}},debounce:function(e,t){var r;return function(){for(var n=this,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];r&&clearTimeout(r),r=setTimeout((function(){e.apply(n,i),r=null}),t)}},copyToClipboard:function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},hashcode:t,getEid:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return String(t(r?"".concat(e,"~~").concat(r):e))},maxTextLength:20,formatText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/[\r\n]/g,"").replace(/\s/g,"").slice(0,20)},mergeArrays:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e.concat(t);return Array.from(new Set(r))},getStayTime:function(e,t){return e<=t?e:t}},n=function(){var e=navigator.userAgent.match(/NetType\/(\w+)/),t="";if(e&&e.length>1){t=_slicedToArray(e,2)[1]}else{var r=navigator.connection||navigator.mozConnection||navigator.webkitConnection;t=r.effectiveType||r.type||""}var n={wifi:"1","2g":"2","3g":"3","4g":"4","5g":"5","6g":"6"};return t&&n[t]?n[t]:"100"},o={reportError:function(e,t){console.warn(e,null==t?void 0:t.message);var r=JSON.stringify({level:[4],count:1,msg:[String(null==t?void 0:t.stack)]}),o=function(e){var t,r,o,i,a,s,c,u,l=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0,d=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,f=window.ATInfo,h=f.uid,p=f.sdkVersion,m={id:"VbBIPNcGnBRAvRvYXE",uin:(void 0===h?"":h)||"_0",version:void 0===p?"":p,aid:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),env:location.port?"local":"production",sessionId:"session-".concat(Date.now()),from:encodeURIComponent(location.href),platform:(r=navigator.userAgent,o=(null===(t=null===navigator||void 0===navigator?void 0:navigator.userAgentData)||void 0===t?void 0:t.platform)||(null===navigator||void 0===navigator?void 0:navigator.platform)||"unknown",i=r.indexOf("Android")>-1||r.indexOf("Adr")>-1,a=!!r.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),s=["Win32","Windows"].includes(o),c=["Mac68K","MacPPC","Macintosh","MacIntel","macOS"].includes(o),u=String(o).indexOf("Linux")>-1,i?"1":a?"2":s?"3":c?"4":u?"5":"100"),netType:n(),vp:"".concat(l," * ").concat(d),sr:"".concat(screen.width," * ").concat(screen.height),referer:encodeURIComponent(document.referrer),ext1:encodeURIComponent(e)},v="";return Object.keys(m).forEach((function(e,t){v+="".concat(0===t?"":"&").concat(e,"=").concat(m[e])})),v}(e);!function(e,t){fetch("".concat("https://aegis.qq.com/collect","?").concat(t),{method:"post",headers:{"content-type":"application/json"},body:e}).catch((function(e){console.log(e)}))}(r,o)}},i=o.reportError,a=function(e){return/^[a-zA-Z]+$/.test(e)},s=function(e){var t=e.name,r=e.value,n=e.transformAttributeKey,o={};if("function"==typeof n){var i=n(t);i&&(o[i]=r)}else o[t]=r;return o},c={isNull:function(e){return"null"===Object.prototype.toString.call(e).replace(/\[object[\s]/,"").replace("]","").toLowerCase()},getCoords:function(e){if(e){var t=e.getBoundingClientRect(),r=document.body,n=document.documentElement,o=window.pageYOffset||n.scrollTop||r.scrollTop,i=window.pageXOffset||n.scrollLeft||r.scrollLeft,a=t.left+i-(n.clientLeft||r.clientLeft||0);return{top:Math.round(t.top+o-(n.clientTop||r.clientTop||0)),left:Math.round(a)}}return{top:0,left:0}},getClosest:function(e,t){if(!t)return null;if(Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(Element.prototype.matches.call(t,e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}),Array.isArray(t)){var r=null;return t.find((function(t){var n=e.closest(t);return null!==n&&(r=n),!!n})),r}return e.closest(t)},getTargetAttr:function e(t,r){var n;if(!t)return{target:null,targetAttr:""};var o=null===(n=t.getAttribute)||void 0===n?void 0:n.call(t,r);return o?{target:t,targetAttr:o}:e(t.parentNode,r)},getVisibleEventAttr:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.document;return void 0!==r.hidden?(e="hidden",t="visibilitychange"):void 0!==r.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==r.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),{hidden:e,visibilityChange:t}},getTagAndOtherSelector:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],r=[];return e.forEach((function(e){a(e)?t.push(e):r.push(e)})),{tagSelectors:t,otherSelectors:r}},getQuerySelectorAll:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,r=[];if(!e)return r;try{r=Array.prototype.slice.call(t.querySelectorAll(e))}catch(n){i("getQuerySelectorAll error",n),r=[]}return r},getDomAfterFind:function(e,t,r){var n=r[t];return"function"==typeof n?n(e):e.querySelector(n)},getAttributesParams:function(e,t){var r={};return t.forEach((function(t){var n="",o={};if("string"==typeof t||t instanceof RegExp)n=t;else if((null==t?void 0:t.length)>0){var i=_slicedToArray(t,2);n=i[0],o=i[1]}if(n){var a=null==o?void 0:o.transformAttributeKey;if(n instanceof RegExp){var c,u=_createForOfIteratorHelper(e.attributes);try{for(u.s();!(c=u.n()).done;){var l=c.value,d=l.name,f=l.value;n.test(d)&&(r=_objectSpread(_objectSpread({},r),s({name:d,value:f,transformAttributeKey:a})))}}catch(p){u.e(p)}finally{u.f()}}else{var h=e.getAttribute(n);h&&(r=_objectSpread(_objectSpread({},r),s({name:n,value:h,transformAttributeKey:a})))}}})),r}},u=(void 0!==_globalThis||("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self),{}),l=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())}))},d="%[a-f0-9]{2}",f=new RegExp(d,"gi"),h=new RegExp("("+d+")+","gi");function p(e,t){try{return decodeURIComponent(e.join(""))}catch(o){}if(1===e.length)return e;var r=e.slice(0,t=t||1),n=e.slice(t);return Array.prototype.concat.call([],p(r),p(n))}function m(e){try{return decodeURIComponent(e)}catch(n){for(var t=e.match(f),r=1;r<t.length;r++)t=(e=p(t,r).join("")).match(f);return e}}var v=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+_typeof(e)+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var r={"%FE%FF":"��","%FF%FE":"��"},n=h.exec(e);n;){try{r[n[0]]=decodeURIComponent(n[0])}catch(t){var o=m(n[0]);o!==n[0]&&(r[n[0]]=o)}n=h.exec(e)}r["%C2"]="�";for(var i=Object.keys(r),a=0;a<i.length;a++){var s=i[a];e=e.replace(new RegExp(s,"g"),r[s])}return e}(e)}},g=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var r=e.indexOf(t);return-1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]},y=function(e,t){for(var r={},n=Object.keys(e),o=Array.isArray(t),i=0;i<n.length;i++){var a=n[i],s=e[a];(o?-1!==t.indexOf(a):t(a,s,e))&&(r[a]=s)}return r};!function(e){var t=l,r=v,n=g,o=y;function i(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function a(e,r){return r.encode?r.strict?t(e):encodeURIComponent(e):e}function s(e,t){return t.decode?r(e):e}function c(e){return Array.isArray(e)?e.sort():"object"===_typeof(e)?c(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}function u(e){var t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function d(e){var t=(e=u(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function f(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function h(e,t){i((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);var r=function(e){var t;switch(e.arrayFormat){case"index":return function(e,r,n){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return function(e,r,n){t=/(\[\])$/.exec(e),n[e=e.replace(/\[\]$/,"")]=t?void 0!==n[e]?[].concat(n[e],r):[r]:r};case"comma":case"separator":return function(t,r,n){var o="string"==typeof r&&r.includes(e.arrayFormatSeparator),i="string"==typeof r&&!o&&s(r,e).includes(e.arrayFormatSeparator);r=i?s(r,e):r;var a=o||i?r.split(e.arrayFormatSeparator).map((function(t){return s(t,e)})):null===r?r:s(r,e);n[t]=a};default:return function(e,t,r){r[e]=void 0!==r[e]?[].concat(r[e],t):t}}}(t),o=Object.create(null);if("string"!=typeof e)return o;if(!(e=e.trim().replace(/^[?#&]/,"")))return o;var a,u=_createForOfIteratorHelper(e.split("&"));try{for(u.s();!(a=u.n()).done;){var l=a.value;if(""!==l){var d=_slicedToArray(n(t.decode?l.replace(/\+/g," "):l,"="),2),h=d[0],p=d[1];p=void 0===p?null:["comma","separator"].includes(t.arrayFormat)?p:s(p,t),r(s(h,t),p,o)}}}catch(S){u.e(S)}finally{u.f()}for(var m=0,v=Object.keys(o);m<v.length;m++){var g=v[m],y=o[g];if("object"===_typeof(y)&&null!==y)for(var b=0,w=Object.keys(y);b<w.length;b++){var _=w[b];y[_]=f(y[_],t)}else o[g]=f(y,t)}return!1===t.sort?o:(!0===t.sort?Object.keys(o).sort():Object.keys(o).sort(t.sort)).reduce((function(e,t){var r=o[t];return e[t]=Boolean(r)&&"object"===_typeof(r)&&!Array.isArray(r)?c(r):r,e}),Object.create(null))}e.extract=d,e.parse=h,e.stringify=function(e,t){if(!e)return"";i((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);for(var r=function(r){return t.skipNull&&null==e[r]||t.skipEmptyString&&""===e[r]},n=function(e){switch(e.arrayFormat){case"index":return function(t){return function(r,n){var o=r.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:[].concat(_toConsumableArray(r),null===n?[[a(t,e),"[",o,"]"].join("")]:[[a(t,e),"[",a(o,e),"]=",a(n,e)].join("")])}};case"bracket":return function(t){return function(r,n){return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:[].concat(_toConsumableArray(r),null===n?[[a(t,e),"[]"].join("")]:[[a(t,e),"[]=",a(n,e)].join("")])}};case"comma":case"separator":return function(t){return function(r,n){return null==n||0===n.length?r:0===r.length?[[a(t,e),"=",a(n,e)].join("")]:[[r,a(n,e)].join(e.arrayFormatSeparator)]}};default:return function(t){return function(r,n){return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:[].concat(_toConsumableArray(r),null===n?[a(t,e)]:[[a(t,e),"=",a(n,e)].join("")])}}}}(t),o={},s=0,c=Object.keys(e);s<c.length;s++){var u=c[s];r(u)||(o[u]=e[u])}var l=Object.keys(o);return!1!==t.sort&&l.sort(t.sort),l.map((function(r){var o=e[r];return void 0===o?"":null===o?a(r,t):Array.isArray(o)?o.reduce(n(r),[]).join("&"):a(r,t)+"="+a(o,t)})).filter((function(e){return e.length>0})).join("&")},e.parseUrl=function(e,t){t=Object.assign({decode:!0},t);var r=_slicedToArray(n(e,"#"),2),o=r[1];return Object.assign({url:r[0].split("?")[0]||"",query:h(d(e),t)},t&&t.parseFragmentIdentifier&&o?{fragmentIdentifier:s(o,t)}:{})},e.stringifyUrl=function(t,r){r=Object.assign({encode:!0,strict:!0},r);var n=u(t.url).split("?")[0]||"",o=e.extract(t.url),i=e.parse(o,{sort:!1}),s=Object.assign(i,t.query),c=e.stringify(s,r);c&&(c="?".concat(c));var l=function(e){var t="",r=e.indexOf("#");return-1!==r&&(t=e.slice(r)),t}(t.url);return t.fragmentIdentifier&&(l="#".concat(a(t.fragmentIdentifier,r))),"".concat(n).concat(c).concat(l)},e.pick=function(t,r,n){n=Object.assign({parseFragmentIdentifier:!0},n);var i=e.parseUrl(t,n),a=i.fragmentIdentifier;return e.stringifyUrl({url:i.url,query:o(i.query,r),fragmentIdentifier:a},n)},e.exclude=function(t,r,n){var o=Array.isArray(r)?function(e){return!r.includes(e)}:function(e,t){return!r(e,t)};return e.pick(t,o,n)}}(u);var b=o.reportError,w=function(e,t){return Object.keys(e).reduce((function(r,n){return r["".concat(t).concat(n.toLowerCase())]=e[n]||"",r}),{})},_=function(e){return e&&e.length>=2&&"#/"===e.substring(0,2)},S={getQueryAndParams:function(e,t,r,n){try{var o={};e&&(o=_objectSpread(_objectSpread({},o),u.parse(e))),n.forEach((function(e){Object.prototype.hasOwnProperty.call(o,e)&&delete o[e]}));var i=w(o,"qr_"),a=w(t,"pr_"),s=w(r,"rx_");return{queryObj:o,routerParams:_objectSpread(_objectSpread(_objectSpread({},i),a),s)}}catch(c){return b("getQueryAndParams error",c),{}}},getRouteParams:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{var r={};return e.find((function(e){var n=e(t);return n&&(r=n.params),n})),r}catch(n){return b("getRouteParams error",n),{}}},extendEvent:function(e){var t=window.history[e];return function(){var r=t.apply(this,arguments),n=new Event(e);return n.arguments=arguments,window.dispatchEvent(n),r}},splitHashAndQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location;try{var t=e.hostname,r=e.hash,n=e.search,o=e.pathname,i=void 0===o?"":o,a=r.indexOf("?"),s={hostname:t,pathname:"".concat(i).concat(r),search:n};if(-1===a)return s;var c=r.substring(a);return c="?"===c?"":c,s.pathname="".concat(i).concat(r.substring(0,a)),s.search=n&&"?"!==n?"".concat(n).concat(c?"&".concat(c.substring(1)):""):c,s}catch(u){return b("splitHashAndQuery error",u),{hostname:"",pathname:"",search:""}}},isHashRouteChange:function(e,t){return e!==t&&(_(e)||_(t))}},E=["id","class","length","style","width","height","fill","viewBox","target","dt-params","dt-remark",/-checked/,/at-inspector/],x=function(e){return e.replace(/("|\n)/g,CSS.escape("$1"))},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e.attributes,n=_toConsumableArray(r);return n.reduce((function(e,r){var n=r.nodeName;return t.find((function(e){return e instanceof RegExp?e.test(n):e===n}))||e.push("[".concat(r.nodeName,'="').concat(x(r.value),'"]')),e}),[])},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e.hasAttribute("class"))return[];var r=[];try{var n=Array.prototype.slice.call(e.classList);n.filter((function(e){return/^[a-z_-][a-z\d_-]*$/i.test(e)?e:null})),r=n}catch(i){var o=e.getAttribute("class");r=(o=o.trim().replace(/\s+/g," ")).split(" ")}return r.filter((function(e){return!t.find((function(t){return e.includes(t)}))}))},C=function(e,t){return I(e,t).filter(Boolean).map((function(e){return".".concat(e)}))},A=function e(t,r,n,o,i,a,s){if(a!==s)for(var c=o;c<=i&&i-c+1>=s-a;++c)n[a]=r[c],e(t,r,n,c+1,i,a+1,s);else t.push(n.slice(0,a).join(""))},T=function(e){var t=e.getAttribute("id");return null!==t&&""!==t?t.match(/(?:^\d|:|\.)/)?'[id="'.concat(t,'"]'):"#".concat(t):null},O=function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":_typeof(HTMLElement))?e instanceof HTMLElement:!!e&&"object"===_typeof(e)&&1===e.nodeType&&"string"==typeof e.nodeName},R=function(e){var t=e.parentNode;if(Boolean(t)){var r=Array.prototype.slice.call(t.children).findIndex((function(t){return O(t)&&t===e}));if(r>-1)return":nth-child(".concat(r+1,")")}return null},j=function(e){for(var t=[],r=e;O(r);)t.push(r),r=r.parentNode;return t},D=c.getQuerySelectorAll,P=function(e,t){if(!Boolean(t))return!1;var r=D(t,e.ownerDocument);return 1===r.length&&r[0]===e},L=c.getQuerySelectorAll,N=o.reportError,U=function(e,t){var r=e.parentNode;if(!r)return!0;var n=L(t,r);return 1===n.length&&n[0]===e},q=function(e,t){return t.find((function(t){return U(e,t)}))},V=function(e,t,r){var n=function(e,t){for(var r=[],n=e.length,o=[],i=1;i<=t;++i)A(r,e,o,0,n-1,0,i);return r}(t,3),o=q(e,n);return Boolean(o)||Boolean(r)&&(n=n.map((function(e){return r+e})),o=q(e,n),Boolean(o))?o:null},M=function(e){for(var t,r=e.element,n=e.ignoreAttributes,o=e.ignoreClasses,i=null===(t=r.tagName)||void 0===t?void 0:t.toLowerCase().replace(/:/g,"\\:"),a=0,s=["ID","Attributes","Class","Tag","NthChild"];a<s.length;a++){switch(s[a]){case"ID":var c=T(r);if(Boolean(c)&&U(r,c))return c;break;case"Attributes":var u=k(r,n);if(Boolean(u)&&u.length){var l=V(r,u,i);if(l)return l}break;case"Class":var d=C(r,o);if(Boolean(d)&&d.length){var f=V(r,d,i);if(f)return f}break;case"Tag":if(Boolean(i)&&U(r,i))return i;break;case"NthChild":var h=R(r);if(Boolean(h))return h}}return"*"},B={getUniqueSelector:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];try{var n,o=[],i=j(e),a=_createForOfIteratorHelper(i);try{for(a.s();!(n=a.n()).done;){var s=n.value,c=M({element:s,ignoreAttributes:t.concat(E),ignoreClasses:r});if(Boolean(c)){o.unshift(c);var u=o.join(" > ");if(P(e,u))return u}}}catch(l){a.e(l)}finally{a.f()}return null}catch(d){return N("getUniqueSelector error",d),null}},getClasses:I},F={common:r,route:S,domElement:c,unique:B,report:o},Q=F.report.reportError,H=F.domElement.getQuerySelectorAll,W=1e-4;try{IntersectionObserver.prototype.THROTTLE_TIMEOUT=300}catch(Ct){console.log(Ct)}var G=F.domElement,$=F.common,J=F.unique,K=F.report.reportError,z=G.getCoords,Y=G.getTagAndOtherSelector,X=G.getQuerySelectorAll,Z=G.getDomAfterFind,ee=$.getEid,te=$.formatText,re=J.getUniqueSelector,ne=J.getClasses,oe=function(e){var t=e.trackData,r=t.queryDom,n=t.eid,o=t.text,i=X(r);if(0===i.length)return null;if(ee(r)===n)return 1===i.length?i[0]:null;if(ee(r,o)===n){var a=i.filter((function(e){return te(e.innerText)===o}));return 1===a.length?a[0]:null}return null},ie={readElement:function(e){var t,r=e.element,n=e.useText,o=e.ignoreAttributes,i=e.ignoreClasses,a=r.id,s=void 0===a?"":a,c=r.name,u=void 0===c?"":c,l=r.tagName,d=r.type,f=te(r.innerText),h=z(r),p=r.getBoundingClientRect(),m=function(e){var t=e.element,r=e.useText,n=e.text,o=e.ignoreAttributes,i=e.ignoreClasses;if(r.length>0&&n){var a=r.find((function(e){return t.matches(e)}));if(a){var s=X(a);if(1===s.length)return{queryDom:a,eid:ee(a)};if(!s.find((function(e){return e!==t&&te(e.innerText)===n})))return{queryDom:a,eid:ee(a,n)}}}var c=re(t,o,i)||"";return{queryDom:c,eid:ee(c)}}({element:r,useText:n,text:f,ignoreAttributes:o,ignoreClasses:i}),v=m.queryDom,g=m.eid;return{id:s,name:u,tag:(null==l?void 0:l.toLowerCase())||"",type:(null==d?void 0:d.toLowerCase())||"",for:(null===(t=r.getAttributeNode("for"))||void 0===t?void 0:t.value)||"",className:ne(r,i),text:f,top:h.top,left:h.left,viewTop:p.top,viewLeft:p.left,queryDom:v,eid:g}},getElementsFromData:function(e){var t=e.trackData,r=e.trackConfig;try{var n=t||{},o=n.type,i=n.eid,a=n.originalQueryDom,s=r||{},c=s.click,u=s.area,l=s.find,d="click"===(void 0===o?"click":o);if(!n.queryDom){var f="[".concat(d?s.keyEid:s.keyAreaId,"='").concat(i,"']");return X(f)}if(a){var h=X(a);if(1!==h.length)return[];var p=h[0],m="";if(d){var v=Y(c),g=v.tagSelectors,y=void 0===g?[]:g,b=v.otherSelectors,w=function(e){return p.matches(e)};m=(void 0===b?[]:b).find(w)||y.find(w)||""}else m=u.find((function(e){return p.matches(e)}))||"";if(!m||!l[m])return[];var _=Z(p,m,l);if(!_)return[];var S=oe({trackData:t});return null===S?[]:S===_?[p]:[]}var E=oe({trackData:t});return E?[E]:[]}catch(Ct){return K("getElementsFromData error",Ct),[]}}},ae=ie.readElement,se=F.domElement,ce=F.common,ue=F.report.reportError,le=se.getClosest,de=se.getTargetAttr,fe=se.getTagAndOtherSelector,he=se.getDomAfterFind,pe=se.getAttributesParams,me=ce.maxTextLength,ve=ce.mergeArrays,ge=ce.formatText,ye=function(e,t){return(null==e?void 0:e.length)&&t.find((function(t){var r;return null===(r=t.matches)||void 0===r?void 0:r.call(t,e.join(","))}))||null},be=function(e,t){var r;if(!e)return{eid:""};try{var n=t.classSuffix,o=void 0===n?"":n,i=t.find,a=void 0===i?{}:i,s=t.useText,c=void 0===s?[]:s,u=t.ignoreAttributes,l=void 0===u?[]:u,d=t.ignoreClasses,f=null,h=Object.keys(a).find((function(t){return e.matches(t)}));h&&(f=he(e,h,a));var p=f||e,m="";f&&(m=ae({element:e,useText:[],ignoreAttributes:l,ignoreClasses:d}).queryDom||"");var v=ae({element:p,useText:c,ignoreAttributes:l,ignoreClasses:d})||{},g=v.id,y=v.name,b=v.for,w=v.queryDom,_=void 0===w?"":w,S=v.text,E=void 0===S?"":S,x=v.eid,k=void 0===x?"":x,I=null===(r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;if(0===e.length)return/>/.test(t)?t.split(">")[0]:t;if(r){var n=e.filter((function(e){return-1!==e.indexOf(r)}));if(n.length>0)return n[0].split(r)[0]}return e[0]+(e[1]?"~~".concat(e[1]):"")}(v.className,_,o))||void 0===r?void 0:r.replace(/--/g,"$$$"),C="";return(null==E?void 0:E.length)<me&&(null==p?void 0:p.childElementCount)<=2&&(C=E),{text:E,queryDom:_,dom:g||y||b||I||"",eid:k,areaId:g||y||b||C||I||"",originalQueryDom:m}}catch(Ct){return ue("getDomInfo error",Ct),{eid:""}}},we=function(e){var t,r,n,o,i=e.el,a=e.config,s=a.formSelector,c=a.tabSelector,u=a.tableSelector;return{dialog:(null===(t=be(le(i,a.dialogSelector),a))||void 0===t?void 0:t.areaId)||"",tab:(null===(r=be(le(i,c),a))||void 0===r?void 0:r.areaId)||"",form:(null===(n=be(le(i,s),a))||void 0===n?void 0:n.areaId)||"",table:(null===(o=be(le(i,u),a))||void 0===o?void 0:o.areaId)||""}},_e=function(e){if(!e)return[];for(var t=[e],r=e.parentNode;r;)t.push(r),r=r.parentNode;return t},Se=function(e){return Array.isArray(e)?e:e?[e]:[]},Ee=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t){return ve(Se(e),Se(t))}),[])},xe=function(e,t){try{var r=e.dialogSelector,n=e.formSelector,o=e.tableSelector,i=e.tabSelector,a=e.click,s=e.area,c=e.find,u=e.useText,l=e.ignoreAttributes,d=e.ignoreClasses;return _objectSpread(_objectSpread(_objectSpread({},_objectWithoutProperties(e,_excluded)),t),{},{dialogSelector:Ee(r||"",t.dialogSelector||""),formSelector:Ee(n||"",t.formSelector||""),tableSelector:Ee(o||"",t.tableSelector||""),tabSelector:Ee(i||"",t.tabSelector||""),click:ve(a||[],t.click||[]),area:ve(s||[],t.area||[]),find:Object.assign({},c||{},t.find||{}),useText:ve(u||[],t.useText||[]),ignoreAttributes:ve(l||[],t.ignoreAttributes||[]),ignoreClasses:ve(d||[],t.ignoreClasses||[])})}catch(Ct){return ue("mergeTrackConfigs error",Ct),e}},ke={defaultTrackConfig:{keyEid:"dt-eid",keyAreaId:"dt-areaid",click:["a","button","input","textarea"],area:[],dialogSelector:"",formSelector:"",tableSelector:"",tabSelector:"",find:{},useText:[],ignoreAttributes:[],ignoreClasses:[]},mergeTrackConfigs:xe,mergeUseLibAndConfig:function(t,r){return e.supportedLib.includes(t)?xe(e[t],r):r},trackClickDom:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var n=t.keyEid,o=void 0===n?"":n,i=t.click,a=void 0===i?[]:i,s=t.reportAttributes,c=void 0===s?[]:s,u=e.target,l=e.path,d=void 0===l?_e(u):l,f={},h=de(u,o),p=h.target,m=h.targetAttr,v=m;if(v)return r&&(f.realTarget=p),_objectSpread(_objectSpread({},pe(p,c)),{},{eid:v,text:ge(p.innerText)},f);if(a.length>1){var g=fe(a),y=g.tagSelectors,b=void 0===y?[]:y,w=g.otherSelectors,_=void 0===w?[]:w,S=ye(_,d)||ye(b,d);if(S){r&&(f.realTarget=S);var E=be(S,t),x=E.text,k=E.queryDom,I=E.dom,C=E.eid,A=E.originalQueryDom;if("0"===C)return null;var T=we({el:S,config:t});return _objectSpread(_objectSpread(_objectSpread(_objectSpread({},pe(S,c)),T),f),{},{eid:C,queryDom:k,text:x,dom:I,originalQueryDom:A})}}return null}catch(Ct){return ue("trackClickDom error",Ct),null}},trackExposeDom:function(e,t){try{var r=t.keyAreaId,n=void 0===r?"":r,o=t.area,i=t.reportAttributes,a=void 0===i?[]:i;if(!e||!e.matches((void 0===o?[]:o).join(",")))return null;var s=e.getAttribute(n)||"",c=pe(e,a);if(s)return _objectSpread(_objectSpread({},c),{},{areaId:s,eid:s,text:ge(e.innerText)});var u=be(e,t),l=u.text,d=void 0===l?"":l,f=u.queryDom,h=void 0===f?"":f,p=u.dom,m=void 0===p?"":p,v=u.eid,g=void 0===v?"":v,y=u.areaId,b=void 0===y?"":y,w=u.originalQueryDom;if("0"===g)return null;var _=we({el:e,config:t});return g?_objectSpread(_objectSpread(_objectSpread({},c),{},{eid:g,areaId:b,queryDom:h,text:d,dom:m},_),{},{originalQueryDom:w}):null}catch(Ct){return ue("trackExposeDom error",Ct),null}},getDomAfterFind:he},Ie={domObserver:function(){function e(t){var r=t.selectors,n=void 0===r?[]:r,o=t.onEnterView,i=t.onLeaveView,a=t.showAreaThreshold,s=void 0===a?W:a;_classCallCheck(this,e),this.selectors=n,this.selectorsUnion=n.join(","),this.threshold=s>W&&s<=1?[W,s]:[W],this.intersectionInstance=null,this.mutationInstance=null,this.init({onEnterView:o,onLeaveView:i})}return _createClass(e,[{key:"addObserveSelector",value:function(e){var t=this;if(e&&this.selectors.includes(e)){this.selectors.push(e),this.selectorsUnion=this.selectors.join(",");var r=H(e);r.length>0&&r.forEach((function(e){var r;e&&(null===(r=t.intersectionInstance)||void 0===r||r.observe(e))}))}}},{key:"unobserveTarget",value:function(e){var t;null===(t=this.intersectionInstance)||void 0===t||t.unobserve(e)}},{key:"disconnect",value:function(){var e,t;null===(e=this.intersectionInstance)||void 0===e||e.disconnect(),null===(t=this.mutationInstance)||void 0===t||t.disconnect()}},{key:"mutationChange",value:function(e,t){var r,n,o=e;if(1===o.nodeType){if(null===(n=null===(r=null==o?void 0:o.className)||void 0===r?void 0:r.match)||void 0===n?void 0:n.call(r,/at-inspector/))return;this.selectors.find((function(e){return o.matches(e)}))&&t(o);var i=H(this.selectorsUnion,o);i.length>0&&i.forEach((function(e){e&&t(e)}))}}},{key:"init",value:function(e){var t=this,r=e.onEnterView,n=e.onLeaveView;this.intersectionInstance=new IntersectionObserver((function(e){try{e.forEach((function(e){var o=e.isIntersecting,i=e.target;o&&e.intersectionRatio>t.threshold[t.threshold.length-1]&&r(i),o||n(i)}))}catch(Ct){Q("domobserver IntersectionObserver error",Ct)}}),{root:null,rootMargin:"0px",threshold:this.threshold}),this.mutationInstance=new MutationObserver((function(e){try{e.forEach((function(e){e.addedNodes.forEach((function(e){t.mutationChange(e,(function(e){var r;return null===(r=t.intersectionInstance)||void 0===r?void 0:r.observe(e)}))})),e.removedNodes.forEach((function(e){t.mutationChange(e,(function(e){var r;n(e),null===(r=t.intersectionInstance)||void 0===r||r.unobserve(e)}))}))}))}catch(Ct){Q("domobserver MutationObserver error",Ct)}})),this.mutationInstance.observe(document.body,{childList:!0,subtree:!0});try{var o=document.querySelector("body");o&&this.mutationChange(o,(function(e){var r;return null===(r=t.intersectionInstance)||void 0===r?void 0:r.observe(e)}))}catch(Ct){Q("domobserver initBodyObserve error",Ct)}}}]),e}(),element:ie,track:ke},Ce="https://autotracker.woa.com",Ae={exports:{}};!function(e,t){e.exports=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)},t=function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};function r(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))}function n(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var o="__BEACON_",i="__BEACON_deviceId",a="last_report_time",s="sending_event_ids",c="beacon_config",u="beacon_config_request_time",l=function(){function e(){var e=this;this.emit=function(t,r){if(e){var n,o=e.__EventsList[t];if(null==o?void 0:o.length){o=o.slice();for(var i=0;i<o.length;i++){n=o[i];try{var a=n.callback.apply(e,[r]);if(1===n.type&&e.remove(t,n.callback),!1===a)break}catch(e){throw e}}}return e}},this.__EventsList={}}return e.prototype.indexOf=function(e,t){for(var r=0;r<e.length;r++)if(e[r].callback===t)return r;return-1},e.prototype.on=function(e,t,r){if(void 0===r&&(r=0),this){var n=this.__EventsList[e];return n||(n=this.__EventsList[e]=[]),-1===this.indexOf(n,t)?(n.push({name:e,type:r||0,callback:t}),this):this}},e.prototype.one=function(e,t){this.on(e,t,1)},e.prototype.remove=function(e,t){if(this){var r=this.__EventsList[e];if(!r)return null;if(!t){try{delete this.__EventsList[e]}catch(e){}return null}if(r.length){var n=this.indexOf(r,t);r.splice(n,1)}return this}},e}();function d(e,t){for(var r={},n=0,o=Object.keys(e);n<o.length;n++){var i=o[n],a=e[i];if("string"==typeof a)r[f(i)]=f(a);else{if(t)throw new Error("value mast be string  !!!!");r[f(String(i))]=f(String(a))}}return r}function f(e){if("string"!=typeof e)return e;try{return e.replace(new RegExp("\\|","g"),"%7C").replace(new RegExp("\\&","g"),"%26").replace(new RegExp("\\=","g"),"%3D").replace(new RegExp("\\+","g"),"%2B")}catch(e){return""}}function h(e){return String(e.A99)+String(e.A100)}var p=function(){},m=function(){function e(e){var r=this;this.lifeCycle=new l,this.uploadJobQueue=[],this.additionalParams={},this.delayTime=0,this._normalLogPipeline=function(e){if(!e||!e.reduce||!e.length)throw new TypeError("createPipeline 方法需要传入至少有一个 pipe 的数组");return 1===e.length?function(t,r){e[0](t,r||p)}:e.reduce((function(e,t){return function(r,n){return void 0===n&&(n=p),e(r,(function(e){return null==t?void 0:t(e,n)}))}}))}([function(e){r.send({url:r.strategy.getUploadUrl(),data:e,method:"post",contentType:"application/json;charset=UTF-8"},(function(){var t=r.config.onReportSuccess;"function"==typeof t&&t(JSON.stringify(e.events))}),(function(){var t=r.config.onReportFail;"function"==typeof t&&t(JSON.stringify(e.events))}))}]),function(e,t){if(!e)throw t instanceof Error?t:new Error(t)}(Boolean(e.appkey),"appkey must be initial"),this.config=t({},e)}return e.prototype.onUserAction=function(e,t){this.preReport(e,t,!1)},e.prototype.onDirectUserAction=function(e,t){this.preReport(e,t,!0)},e.prototype.preReport=function(e,t,r){e?this.strategy.isEventUpOnOff()&&(this.strategy.isBlackEvent(e)||this.strategy.isSampleEvent(e)||this.onReport(e,t,r)):this.errorReport.reportError("602"," no eventCode")},e.prototype.addAdditionalParams=function(e){for(var t=0,r=Object.keys(e);t<r.length;t++){var n=r[t];this.additionalParams[n]=e[n]}},e.prototype.setChannelId=function(e){this.commonInfo.channelID=String(e)},e.prototype.setOpenId=function(e){this.commonInfo.openid=String(e)},e.prototype.setUnionid=function(e){this.commonInfo.unid=String(e)},e.prototype.getDeviceId=function(){return this.commonInfo.deviceId},e.prototype.getCommonInfo=function(){return this.commonInfo},e.prototype.removeSendingId=function(e){try{var t=JSON.parse(this.storage.getItem(s)),r=t.indexOf(e);-1!=r&&(t.splice(r,1),this.storage.setItem(s,JSON.stringify(t)))}catch(e){}},e}(),v=function(){function e(e,t,r,n){this.requestParams={},this.network=n,this.requestParams.attaid="00400014144",this.requestParams.token="6478159937",this.requestParams.product_id=e.appkey,this.requestParams.platform=r,this.requestParams.uin=t.deviceId,this.requestParams.model="",this.requestParams.os=r,this.requestParams.app_version=e.appVersion,this.requestParams.sdk_version=t.sdkVersion,this.requestParams.error_stack="",this.uploadUrl=e.isOversea?"https://htrace.wetvinfo.com/kv":"https://h.trace.qq.com/kv"}return e.prototype.reportError=function(e,t){this.requestParams._dc=Math.random(),this.requestParams.error_msg=t,this.requestParams.error_code=e,this.network.get(this.uploadUrl,{params:this.requestParams}).catch((function(e){}))},e}(),g=function(){function e(e,t,r,n,o){this.strategy={isEventUpOnOff:!0,httpsUploadUrl:"https://otheve.beacon.qq.com/analytics/v2_upload",requestInterval:30,blacklist:[],samplelist:[]},this.realSample={},this.appkey="",this.needQueryConfig=!0,this.appkey=t.appkey,this.storage=n,this.needQueryConfig=e;try{var i=JSON.parse(this.storage.getItem(c));i&&this.processData(i)}catch(e){}t.isOversea&&(this.strategy.httpsUploadUrl="https://svibeacon.onezapp.com/analytics/v2_upload"),!t.isOversea&&this.needRequestConfig()&&this.requestConfig(t.appVersion,r,o)}return e.prototype.requestConfig=function(e,t,r){var n=this;this.storage.setItem(u,Date.now().toString()),r.post("https://oth.str.beacon.qq.com/trpc.beacon.configserver.BeaconConfigService/QueryConfig",{platformId:"undefined"==typeof wx?"3":"4",mainAppKey:this.appkey,appVersion:e,sdkVersion:t.sdkVersion,osVersion:t.userAgent,model:"",packageName:"",params:{A3:t.deviceId}}).then((function(e){if(0==e.data.ret)try{var t=JSON.parse(e.data.beaconConfig);t&&(n.processData(t),n.storage.setItem(c,e.data.beaconConfig))}catch(e){}else n.processData(null),n.storage.setItem(c,"")})).catch((function(e){}))},e.prototype.processData=function(e){var t,r,n,o,i;this.strategy.isEventUpOnOff=null!==(t=null==e?void 0:e.isEventUpOnOff)&&void 0!==t?t:this.strategy.isEventUpOnOff,this.strategy.httpsUploadUrl=null!==(r=null==e?void 0:e.httpsUploadUrl)&&void 0!==r?r:this.strategy.httpsUploadUrl,this.strategy.requestInterval=null!==(n=null==e?void 0:e.requestInterval)&&void 0!==n?n:this.strategy.requestInterval,this.strategy.blacklist=null!==(o=null==e?void 0:e.blacklist)&&void 0!==o?o:this.strategy.blacklist,this.strategy.samplelist=null!==(i=null==e?void 0:e.samplelist)&&void 0!==i?i:this.strategy.samplelist;for(var a=0,s=this.strategy.samplelist;a<s.length;a++){var c=s[a].split(",");2==c.length&&(this.realSample[c[0]]=c[1])}},e.prototype.needRequestConfig=function(){if(!this.needQueryConfig)return!1;var e=Number(this.storage.getItem(u));return Date.now()-e>60*this.strategy.requestInterval*1e3},e.prototype.getUploadUrl=function(){return this.strategy.httpsUploadUrl+"?appkey="+this.appkey},e.prototype.isBlackEvent=function(e){return-1!=this.strategy.blacklist.indexOf(e)},e.prototype.isEventUpOnOff=function(){return this.strategy.isEventUpOnOff},e.prototype.isSampleEvent=function(e){return!!Object.prototype.hasOwnProperty.call(this.realSample,e)&&this.realSample[e]<Math.floor(Math.random()*Math.floor(1e4))},e}(),y="session_storage_key",b=function(){function e(e,t,r){this.beacon=r,this.storage=e,this.duration=t,this.appkey=r.config.appkey}return e.prototype.getSession=function(){var e=this.storage.getItem(y);if(!e)return this.createSession();var t="",r=0;try{var n=JSON.parse(e)||{sessionId:void 0,sessionStart:void 0};if(!n.sessionId||!n.sessionStart)return this.createSession();var o=Number(this.storage.getItem(a));if(Date.now()-o>this.duration)return this.createSession();t=n.sessionId,r=n.sessionStart}catch(e){}return{sessionId:t,sessionStart:r}},e.prototype.createSession=function(){var e=Date.now(),t={sessionId:this.appkey+"_"+e.toString(),sessionStart:e};this.storage.setItem(y,JSON.stringify(t)),this.storage.setItem(a,e.toString());var r="is_new_user",n=this.storage.getItem(r);return this.beacon.onDirectUserAction("rqd_applaunched",{A21:n?"N":"Y"}),this.storage.setItem(r,JSON.stringify(!1)),t},e}();function w(){var e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1,r=e.indexOf("Edge")>-1&&!t,n=e.indexOf("Trident")>-1&&e.indexOf("rv:11.0")>-1;if(t){new RegExp("MSIE (\\d+\\.\\d+);").test(e);var o=parseFloat(RegExp.$1);return 7==o?7:8==o?8:9==o?9:10==o?10:6}return r?-2:n?11:-1}function _(e,t){var r,n;return(r="https://tun-cos-1258344701.file.myqcloud.com/fp.js",void 0===n&&(n=Date.now()+"-"+Math.random()),new Promise((function(e,t){if(document.getElementById(n))e(void 0);else{var o=document.getElementsByTagName("head")[0],i=document.createElement("script");i.onload=function(){return function(){i.onload=null,e(void 0)}},i.onerror=function(e){i.onerror=null,o.removeChild(i),t(e)},i.src=r,i.id=n,o.appendChild(i)}}))).then((function(){(new Fingerprint).getQimei36(e,t)})).catch((function(e){})),""}var S,E=function(){return(E=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},x=function(){function e(e,t){void 0===t&&(t={}),this.reportOptions={},this.config=e,this.reportOptions=t}return e.canUseDB=function(){return!!(null===window||void 0===window?void 0:window.indexedDB)},e.prototype.openDB=function(){var t=this;return new Promise((function(r,n){if(!e.canUseDB())return n({message:"当前不支持 indexeddb"});var o=t.config,i=o.stores,a=indexedDB.open(o.name,o.version);a.onsuccess=function(){t.db=a.result,r(),E({result:1,func:"open",params:JSON.stringify(t.config)},t.reportOptions)},a.onerror=function(e){var r,o;n(e),E({result:0,func:"open",params:JSON.stringify(t.config),error_msg:null===(o=null===(r=e.target)||void 0===r?void 0:r.error)||void 0===o?void 0:o.message},t.reportOptions)},a.onupgradeneeded=function(){t.db=a.result;try{null==i||i.forEach((function(e){t.createStore(e)}))}catch(e){E({result:0,func:"open",params:JSON.stringify(t.config),error_msg:e.message},t.reportOptions),n(e)}}}))},e.prototype.useStore=function(e){return this.storeName=e,this},e.prototype.deleteDB=function(){var e=this;return this.closeDB(),new Promise((function(t,r){var n=indexedDB.deleteDatabase(e.config.name);n.onsuccess=function(){return t()},n.onerror=r}))},e.prototype.closeDB=function(){var e;null===(e=this.db)||void 0===e||e.close(),this.db=null},e.prototype.getStoreCount=function(){var e=this;return new Promise((function(t,r){var n=e.getStore("readonly").count();n.onsuccess=function(){return t(n.result)},n.onerror=r}))},e.prototype.clearStore=function(){var e=this;return new Promise((function(t,r){var n=e.getStore("readwrite").clear();n.onsuccess=function(){return t()},n.onerror=r}))},e.prototype.add=function(e,t){var r=this;return new Promise((function(n,o){var i=r.getStore("readwrite").add(e,t);i.onsuccess=function(){n(i.result)},i.onerror=o}))},e.prototype.put=function(e,t){var r=this;return new Promise((function(n,o){var i=r.getStore("readwrite").put(e,t);i.onsuccess=function(){n(i.result)},i.onerror=o}))},e.prototype.getStoreAllData=function(){var e=this;return new Promise((function(t,r){var n=e.getStore("readonly").openCursor(),o=[];n.onsuccess=function(){var e;(null===(e=n.result)||void 0===e?void 0:e.value)?(o.push(n.result.value),n.result.continue()):t(o)},n.onerror=r}))},e.prototype.getDataRangeByIndex=function(e,t,r,n,o){var i=this;return new Promise((function(a,s){var c=i.getStore().index(e),u=IDBKeyRange.bound(t,r,n,o),l=[],d=c.openCursor(u);d.onsuccess=function(){var e;(null===(e=null==d?void 0:d.result)||void 0===e?void 0:e.value)?(l.push(null==d?void 0:d.result.value),null==d||d.result.continue()):a(l)},d.onerror=s}))},e.prototype.removeDataByIndex=function(e,t,r,n,o){var i=this;return new Promise((function(a,s){var c=i.getStore("readwrite").index(e),u=IDBKeyRange.bound(t,r,n,o),l=c.openCursor(u),d=0;l.onsuccess=function(e){var t=e.target.result;t?(d+=1,t.delete(),t.continue()):a(d)},l.onerror=s}))},e.prototype.createStore=function(e){var t=e.name,r=e.indexes,n=void 0===r?[]:r,o=e.options;if(this.db){this.db.objectStoreNames.contains(t)&&this.db.deleteObjectStore(t);var i=this.db.createObjectStore(t,o);n.forEach((function(e){i.createIndex(e.indexName,e.keyPath,e.options)}))}},e.prototype.getStore=function(e){var t;return void 0===e&&(e="readonly"),null===(t=this.db)||void 0===t?void 0:t.transaction(this.storeName,e).objectStore(this.storeName)},e}(),k="event_table_v3",I="eventId",C=function(){function e(e){this.isReady=!1,this.taskQueue=Promise.resolve(),this.db=new x({name:"Beacon_"+e+"_V3",version:1,stores:[{name:k,options:{keyPath:I},indexes:[{indexName:I,keyPath:I,options:{unique:!0}}]}]}),this.open()}return e.prototype.getCount=function(){var e=this;return this.readyExec((function(){return e.db.getStoreCount()}))},e.prototype.setItem=function(e,t){var r=this;return this.readyExec((function(){return r.db.add({eventId:e,value:t})}))},e.prototype.getItem=function(e){return r(this,void 0,void 0,(function(){var t=this;return n(this,(function(r){return[2,this.readyExec((function(){return t.db.getDataRangeByIndex(I,e,e)}))]}))}))},e.prototype.removeItem=function(e){var t=this;return this.readyExec((function(){return t.db.removeDataByIndex(I,e,e)}))},e.prototype.updateItem=function(e,t){var r=this;return this.readyExec((function(){return r.db.put({eventId:e,value:t})}))},e.prototype.iterate=function(e){var t=this;return this.readyExec((function(){return t.db.getStoreAllData().then((function(t){t.forEach((function(t){e(t.value)}))}))}))},e.prototype.open=function(){return r(this,void 0,void 0,(function(){var e=this;return n(this,(function(t){switch(t.label){case 0:return this.taskQueue=this.taskQueue.then((function(){return e.db.openDB()})),[4,this.taskQueue];case 1:return t.sent(),this.isReady=!0,this.db.useStore(k),[2]}}))}))},e.prototype.readyExec=function(e){return this.isReady?e():(this.taskQueue=this.taskQueue.then((function(){return e()})),this.taskQueue)},e}(),A=function(){function e(e){this.keyObject={},this.storage=e}return e.prototype.getCount=function(){return this.storage.getStoreCount()},e.prototype.removeItem=function(e){this.storage.removeItem(e),delete this.keyObject[e]},e.prototype.setItem=function(e,t){var r=JSON.stringify(t);this.storage.setItem(e,r),this.keyObject[e]=t},e.prototype.iterate=function(e){for(var t=Object.keys(this.keyObject),r=0;r<t.length;r++){var n=this.storage.getItem(t[r]);e(JSON.parse(n))}},e}(),T=function(){function e(e,t){var r=this;this.dbEventCount=0,w()>0||!window.indexedDB||/X5Lite/.test(navigator.userAgent)?(this.store=new A(t),this.dbEventCount=this.store.getCount()):(this.store=new C(e),this.getCount().then((function(e){r.dbEventCount=e})).catch((function(e){})))}return e.prototype.getCount=function(){return r(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.store.getCount()];case 1:return[2,e.sent()];case 2:return e.sent(),[2,Promise.reject()];case 3:return[2]}}))}))},e.prototype.insertEvent=function(e,t){return r(this,void 0,void 0,(function(){var r,o;return n(this,(function(n){switch(n.label){case 0:if(this.dbEventCount>=1e4)return[2,Promise.reject()];r=h(e.mapValue),n.label=1;case 1:return n.trys.push([1,3,,4]),this.dbEventCount++,[4,this.store.setItem(r,e)];case 2:return[2,n.sent()];case 3:return o=n.sent(),t&&t(o,e),this.dbEventCount--,[2,Promise.reject()];case 4:return[2]}}))}))},e.prototype.getEvents=function(){return r(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:e=[],t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.store.iterate((function(t){e.push(t)}))];case 2:case 3:return t.sent(),[2,Promise.all(e)];case 4:return[2]}}))}))},e.prototype.removeEvent=function(e){return r(this,void 0,void 0,(function(){var t;return n(this,(function(r){switch(r.label){case 0:t=h(e.mapValue),r.label=1;case 1:return r.trys.push([1,3,,4]),this.dbEventCount--,[4,this.store.removeItem(t)];case 2:return[2,r.sent()];case 3:return r.sent(),this.dbEventCount++,[2,Promise.reject()];case 4:return[2]}}))}))},e}(),O=function(){return(O=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function R(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function j(e,t){var r=[null,void 0,"",NaN].includes(e);if(t.isSkipEmpty&&r)return null;var n=!t.isSkipEmpty&&r?"":e;try{return t.encode?encodeURIComponent(n):n}catch(e){return null}}function D(e){var t=e.split("#"),r=t[1],n=void 0===r?"":r,o=t[0].split("?"),i=o[0],a=o[1],s=void 0===a?"":a,c=R(n),u=Object.create(null);return s.split("&").forEach((function(e){var t=e.split("="),r=t[1],n=void 0===r?"":r,o=R(t[0]),i=R(n);null===o||null===i||""===o&&""===i||u[o]||(u[o]=i)})),{url:i,query:u,hash:c}}function P(e,t){void 0===t&&(t={encode:!0,isSkipEmpty:!1});var r=e.url,n=e.query,o=void 0===n?{}:n,i=e.hash,a=r.split("#"),s=a[1],c=void 0===s?"":s,u=a[0].split("?")[0],l=[],d=j(i||c,t),f=O(O({},D(r).query),o);return Object.keys(f).forEach((function(e){var r=j(e,t),n=j(f[e],t);null!==r&&null!==n&&l.push(r+"="+n)})),u+(l.length?"?"+l.join("&"):"")+(d?"#"+d:"")}function L(e,t){return new Promise((function(r,n){if(t&&document.querySelectorAll("script[data-tag="+t+"]").length)return r();var o=document.createElement("script"),i=O({type:"text/javascript",charset:"utf-8"},e);Object.keys(i).forEach((function(e){return function(e,t,r){if(e)return void 0===r?e.getAttribute(t):e.setAttribute(t,r)}(o,e,i[e])})),t&&(o.dataset.tag=t),o.onload=function(){return r()},o.onreadystatechange=function(){["complete","loaded"].includes(o.readyState)&&(o.onreadystatechange=null,r())},o.onerror=n,document.body.appendChild(o)}))}!function(e){e[e.equal=0]="equal",e[e.low=-1]="low",e[e.high=1]="high"}(S||(S={}));var N=function(){return(N=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function U(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))}function q(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var V=function(){function e(){this.interceptors=[]}return e.prototype.use=function(e,t){return this.interceptors.push({resolved:e,rejected:t}),this.interceptors.length-1},e.prototype.traverse=function(e,t){void 0===t&&(t=!1);var r=Promise.resolve(e);return(t?Array.prototype.reduceRight:Array.prototype.reduce).call(this.interceptors,(function(e,t){return t&&(r=r.then(t.resolved,t.rejected)),e}),""),r},e.prototype.eject=function(e){this.interceptors[e]&&(this.interceptors[e]=null)},e}(),M={defaults:{timeout:0,method:"GET",mode:"cors",redirect:"follow",credentials:"same-origin"},headers:{common:{Accept:"application/json, text/plain, */*"},POST:{"Content-Type":"application/x-www-form-urlencoded"},PUT:{"Content-Type":"application/x-www-form-urlencoded"},PATCH:{"Content-Type":"application/x-www-form-urlencoded"}},baseURL:"",polyfillUrl:"https://vm.gtimg.cn/comps/script/fetch.min.js",interceptors:{request:new V,response:new V}},B=/^([a-z][a-z\d+\-.]*:)?\/\//i,F=Object.prototype.toString;function Q(e){return U(this,void 0,void 0,(function(){var t;return q(this,(function(r){switch(r.label){case 0:if(window.fetch)return[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,L({src:e})];case 2:return r.sent(),[3,4];case 3:throw t=r.sent(),function(e){if("undefined"!=typeof Image){var t=new Image(1,1),r=N({attaid:"0f400053130",token:"6552374442",comps:"@tencent/ovb-request",version:"1.1.18",ua:navigator.userAgent,url:location.href,_dc:Math.random()},e),n=Object.keys(r).map((function(e){return e+"="+encodeURIComponent(r[e])})).join("&");t.src="https://h.trace.qq.com/kv?"+n}}({func:"loadPolyfill",result:0,params:e,error_msg:t.message}),new Error("加载 polyfill "+e+" 失败: "+t.message);case 4:return[2]}}))}))}function H(e){return["Accept","Content-Type"].forEach((function(t){return r=t,void((n=e.headers)&&Object.keys(n).forEach((function(e){e!==r&&e.toUpperCase()===r.toUpperCase()&&(n[r]=n[e],delete n[e])})));var r,n})),function(e){if("[object Object]"!==F.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}(e.body)&&(e.body=JSON.stringify(e.body),e.headers&&(e.headers["Content-Type"]="application/json;charset=utf-8")),e}function W(e){return U(this,void 0,void 0,(function(){var t,r,n,o,i,a,s,c,u,l,d,f,h,p,m,v,g;return q(this,(function(y){switch(y.label){case 0:return t=M.baseURL,r=M.defaults,n=M.interceptors,[4,Q(M.polyfillUrl)];case 1:return y.sent(),(o=N(N({},r),e)).headers||(o.headers=function(e){void 0===e&&(e="GET");var t=M.headers[e]||{};return N(N({},M.headers.common),t)}(o.method)),H(o),[4,n.request.traverse(o,!0)];case 2:if((i=y.sent())instanceof Error)throw i;return i.url=function(e,t){return!e||B.test(t)?t:e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,"")}(t,i.url),a=i.url,s=i.timeout,c=i.params,l=["GET","DELETE","OPTIONS","HEAD"].includes(void 0===(u=i.method)?"GET":u)&&!!c,d=l?P({url:a,query:c}):a,f=[],s&&!i.signal&&(m=new Promise((function(e){h=setTimeout((function(){e(new Error("timeout"))}),s)})),f.push(m),p=new AbortController,i.signal=p.signal),f.push(fetch(d,i).catch((function(e){return e}))),[4,Promise.race(f)];case 3:return v=y.sent(),h&&clearTimeout(h),[4,n.response.traverse(v)];case 4:if((g=y.sent())instanceof Error)throw null==p||p.abort(),g;return[2,g]}}))}))}var G=function(){function e(e){M.interceptors.request.use((function(r){var n=r.method,o=r.body,i=o;if(e.onReportBeforeSend){var a=e.onReportBeforeSend({url:r.url,method:n,data:o?JSON.parse(o):null});i=(null==a?void 0:a.data)?JSON.stringify(a.data):null}return"GET"!=n&&i?t(t({},r),{body:i}):r}))}return e.prototype.get=function(e,o){return r(this,void 0,void 0,(function(){var r,i;return n(this,(function(n){switch(n.label){case 0:return[4,W(t({url:e},o))];case 1:return[4,(r=n.sent()).json()];case 2:return i=n.sent(),[2,Promise.resolve({data:i,status:r.status,statusText:r.statusText,headers:r.headers})]}}))}))},e.prototype.post=function(e,o,i){return r(this,void 0,void 0,(function(){var r,a;return n(this,(function(n){switch(n.label){case 0:return[4,W(t({url:e,body:o,method:"POST"},i))];case 1:return[4,(r=n.sent()).json()];case 2:return a=n.sent(),[2,Promise.resolve({data:a,status:r.status,statusText:r.statusText,headers:r.headers})]}}))}))},e}(),$=function(){function e(e){this.appkey=e}return e.prototype.getItem=function(e){try{return window.localStorage.getItem(this.getStoreKey(e))}catch(e){return""}},e.prototype.removeItem=function(e){try{window.localStorage.removeItem(this.getStoreKey(e))}catch(e){}},e.prototype.setItem=function(e,t){try{window.localStorage.setItem(this.getStoreKey(e),t)}catch(e){}},e.prototype.setSessionItem=function(e,t){try{window.sessionStorage.setItem(this.getStoreKey(e),t)}catch(e){}},e.prototype.getSessionItem=function(e){try{return window.sessionStorage.getItem(this.getStoreKey(e))}catch(e){return""}},e.prototype.getStoreKey=function(e){return o+this.appkey+"_"+e},e.prototype.createDeviceId=function(){try{var e=window.localStorage.getItem(i);return e||(e=function(e){for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789",r="",n=0;n<e;n++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}(32),window.localStorage.setItem(i,e)),e}catch(e){return""}},e.prototype.clear=function(){try{for(var e=window.localStorage.length,t=0;t<e;t++){var r=window.localStorage.key(t);(null==r?void 0:r.substr(0,9))==o&&window.localStorage.removeItem(r)}}catch(e){}},e.prototype.getStoreCount=function(){var e=0;try{e=window.localStorage.length}catch(e){}return e},e}(),J="logid_start",K="4.5.13-web";return function(r){function n(e){var t=r.call(this,e)||this;t.qimei36="",t.uselessCycleTaskNum=0,t.underWeakNet=!1,t.pauseSearching=!1,t.send=function(e,r,n){t.storage.setItem(a,Date.now().toString()),t.network.post(t.uploadUrl||t.strategy.getUploadUrl(),e.data).then((function(n){var o;t.delayTime=100==(null===(o=null==n?void 0:n.data)||void 0===o?void 0:o.result)?1e3*n.data.delayTime:0,r&&r(e.data),e.data.events.forEach((function(e){t.store.removeEvent(e).then((function(){t.removeSendingId(h(e.mapValue))}))})),t.doCustomCycleTask()})).catch((function(r){var o=e.data.events;t.errorReport.reportError(r.code?r.code.toString():"600",r.message),n&&n(e.data);var i=JSON.parse(t.storage.getItem(s));o.forEach((function(e){i&&-1!=i.indexOf(h(e))&&t.store.insertEvent(e,(function(e,r){e&&t.errorReport.reportError("604","insertEvent fail!")})),t.removeSendingId(h(e))})),t.monitorUploadFailed()}))};var n,o,i=w();return t.isUnderIE8=i>0&&i<8,t.isUnderIE8||(t.isUnderIE=i>0,e.needInitQimei&&_(e.appkey,(function(e){t.qimei36=e.q36})),t.network=new G(e),t.storage=new $(e.appkey),t.initCommonInfo(e),t.store=new T(e.appkey,t.storage),t.errorReport=new v(t.config,t.commonInfo,"web",t.network),t.strategy=new g(null==e.needQueryConfig||e.needQueryConfig,t.config,t.commonInfo,t.storage,t.network),t.logidStartTime=t.storage.getItem(J),t.logidStartTime||(t.logidStartTime=Date.now().toString(),t.storage.setItem(J,t.logidStartTime)),n=t.logidStartTime,o=Date.now()-Number.parseFloat(n),Math.floor(o/864e5)>=365&&t.storage.clear(),t.initSession(e),t.onDirectUserAction("rqd_js_init",{}),setTimeout((function(){return t.lifeCycle.emit("init")}),0),t.initDelayTime=e.delay?e.delay:1e3,t.cycleTask(t.initDelayTime)),t}return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}(n,r),n.prototype.initSession=function(e){var t=18e5;e.sessionDuration&&e.sessionDuration>3e4&&(t=e.sessionDuration),this.beaconSession=new b(this.storage,t,this)},n.prototype.initCommonInfo=function(e){var t=Number(this.storage.getItem(a));try{var r=JSON.parse(this.storage.getItem(s));(Date.now()-t>3e4||!r)&&this.storage.setItem(s,JSON.stringify([]))}catch(e){}e.uploadUrl&&(this.uploadUrl=e.uploadUrl+"?appkey="+e.appkey);var n=[window.screen.width,window.screen.height];window.devicePixelRatio&&n.push(window.devicePixelRatio),this.commonInfo={deviceId:this.storage.createDeviceId(),language:navigator&&navigator.language||"zh_CN",query:window.location.search,userAgent:navigator.userAgent,pixel:n.join("*"),channelID:e.channelID?String(e.channelID):"",openid:e.openid?String(e.openid):"",unid:e.unionid?String(e.unionid):"",sdkVersion:K},this.config.appVersion=e.versionCode?String(e.versionCode):"",this.config.strictMode=e.strictMode},n.prototype.cycleTask=function(e){var t=this;this.intervalID=window.setInterval((function(){t.pauseSearching||t.store.getEvents().then((function(e){0==e.length&&(t.pauseSearching=!0);var r=[],n=JSON.parse(t.storage.getItem(s));n||(n=[]),e&&e.forEach((function(e){var t=h(e.mapValue);-1==n.indexOf(t)&&(r.push(e),n.push(t))})),0!=r.length&&(t.storage.setItem(s,JSON.stringify(n)),t._normalLogPipeline(t.assembleData(r)))})).catch((function(e){}))}),e)},n.prototype.onReport=function(e,t,r){var n=this;if(this.isUnderIE8)this.errorReport.reportError("601","UnderIE8");else{this.pauseSearching=!1;var o=this.generateData(e,t,r);if(r&&0==this.delayTime&&!this.underWeakNet)this._normalLogPipeline(this.assembleData(o));else{var i=o.shift();i&&this.store.insertEvent(i,(function(e){e&&n.errorReport.reportError("604","insertEvent fail!")})).catch((function(e){n._normalLogPipeline(n.assembleData(o))}))}}},n.prototype.onSendBeacon=function(e,t){if(this.isUnderIE)this.errorReport.reportError("605","UnderIE");else{this.pauseSearching=!1;var r=this.assembleData(this.generateData(e,t,!0));"function"==typeof navigator.sendBeacon&&navigator.sendBeacon(this.uploadUrl||this.strategy.getUploadUrl(),JSON.stringify(r))}},n.prototype.generateData=function(e,r,n){var o=[],i="4.5.13-web_"+(n?"direct_log_id":"normal_log_id"),a=Number(this.storage.getItem(i));return a=a||1,r=t(t({},r),{A99:n?"Y":"N",A100:a.toString(),A72:K,A88:this.logidStartTime}),a++,this.storage.setItem(i,a.toString()),o.push({eventCode:e,eventTime:Date.now().toString(),mapValue:d(r,this.config.strictMode)}),o},n.prototype.assembleData=function(e){var r=this.beaconSession.getSession();return{appVersion:this.config.appVersion?f(this.config.appVersion):"",sdkId:"js",sdkVersion:K,mainAppKey:this.config.appkey,platformId:3,common:d(t(t({},this.additionalParams),{A2:this.commonInfo.deviceId,A8:this.commonInfo.openid,A12:this.commonInfo.language,A17:this.commonInfo.pixel,A23:this.commonInfo.channelID,A50:this.commonInfo.unid,A76:r.sessionId,A101:this.commonInfo.userAgent,A102:window.location.href,A104:document.referrer,A119:this.commonInfo.query,A153:this.qimei36}),!1),events:e}},n.prototype.monitorUploadFailed=function(){this.uselessCycleTaskNum++,this.uselessCycleTaskNum>=5&&(window.clearInterval(this.intervalID),this.cycleTask(6e4),this.underWeakNet=!0)},n.prototype.doCustomCycleTask=function(){this.uselessCycleTaskNum>=5&&(window.clearInterval(this.intervalID),this.cycleTask(this.initDelayTime)),this.uselessCycleTaskNum=0,this.underWeakNet=!1},n}(m)}()}(Ae);var Te=Ae.exports,Oe={exports:{}};!function(e,t){e.exports=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var r=/\d+([._]\d+)*/;function n(e){var t,n=r.exec(e);return null!=(t=null==n?void 0:n[0].replace(/_/g,"."))?t:null}function o(e){var t=n(e);return(null==t?void 0:t.split(".").map(Number))||[]}function i(e,t){return void 0===t&&(t=""),""===t||(r=o(e),n=o(t),(i=Array(Math.max(r.length,n.length)).fill(0).map((function(e,t){return(r[t]||0)-(n[t]||0)})).find((function(e){return 0!==e}))||0)<0?-1:i>0?1:0);var r,n,i}function a(e,t){var r;try{r=new RegExp("\\b"+e+"\\W+\\d+([\\._]\\d+)*","i")}catch(e){return null}var o=r.exec(t);return o?n(o[0].substring(e.length)):null}var s={qq:/QQBrowser/,maxthon:/Maxthon/,taobao:/TaoBrowser/,baidu:/BIDUBrowser/,uc:/UBrowser/,360:/360SE|360EE|QIHU/,chrome:/(Chrome|CriOS)\/\S+( Mobile\S*)? Safari\/\S+$/i},c=function(){function r(e){var r=this;t(this,"getQQBrowserVersion",(function(){return r.isPCQQBrowser?a("QQBrowser",r.userAgent):null})),t(this,"isQQBrowserVersionAboveOrEqual",(function(e){return i(r.getQQBrowserVersion()||"",e)>=0})),t(this,"getChromeVersion",(function(){return a("Chrome",r.userAgent)})),t(this,"isChromeVersionAboveOrEqual",(function(e){return i(r.getChromeVersion()||"",e)>=0})),t(this,"getSafariVersion",(function(){return a("Safari",r.userAgent)})),this.userAgent=void 0===e?"undefined"!=typeof navigator?navigator.userAgent:"":e}var n,o,c=r.prototype;return c.getIEShellType=function(){return/SE/.test(this.userAgent)?"sougouIE":/QQBrowser/.test(this.userAgent)?"qqIE":"ie"},c.getIEVersion=function(){var e=/(msie\s|trident.*rv:)([\w.]+)/.exec(this.userAgent.toLowerCase());try{return e[2]}catch(e){return"undefined"!=typeof document&&document.documentMode||""}},c.getEdgeVersion=function(){return a("Edge",this.userAgent)},c.getFirefoxVersion=function(){return a("Firefox",this.userAgent)},c.getChromiumShellType=function(){var e=function(){if("undefined"==typeof window)return"";if(void 0!==window.scrollMaxX)return"";var e=window.navigator.appVersion,t=window.external;if(t&&"SEVersion"in t)return"sougou";if(t&&"LiebaoGetVersion"in t)return"liebao";var r=Object.values(s).findIndex((function(t){return t.test(e)}));return-1!==r?Object.keys(s)[r]:/\sOPR\//.test(e)||/Opera/.test(e)||window.navigator.vendor&&0===window.navigator.vendor.indexOf("Opera")?"opera":""}();return["maxthon","opera","chrome"].includes(e)?e:""!==e?e+"Chrome":""},n=r,(o=[{key:"isMobile",get:function(){return/(mobile)/i.test(this.userAgent)}},{key:"isPCQQBrowser",get:function(){return!this.isMobile&&/QQBrowser/i.test(this.userAgent)&&!/QBCore/i.test(this.userAgent)}},{key:"isChrome",get:function(){return/(Chrome|CriOS)\/\S+( Mobile\S*)? Safari\/\S+$/i.test(this.userAgent)}},{key:"is360SE",get:function(){return function(){if("undefined"==typeof navigator)return!1;for(var e in navigator.plugins)if("np-mswmp.dll"==navigator.plugins[e].filename)return!0;return!1}()}},{key:"isSafari",get:function(){return/Version\/\S+( Mobile\S*)? Safari\/\S+$/i.test(this.userAgent)}},{key:"isIE",get:function(){return/MSIE/i.test(this.userAgent)&&!/opera/i.test(this.userAgent)||/Trident/i.test(this.userAgent)}},{key:"isOldEdge",get:function(){return/Edge/i.test(this.userAgent)}},{key:"isChromiumEdge",get:function(){return/Edg\//i.test(this.userAgent)}},{key:"isFirefox",get:function(){return/(Firefox|Focus|FxiOS)\//i.test(this.userAgent)}},{key:"isXHH",get:function(){return-1!==this.userAgent.indexOf("Macintosh; Intel Mac OS X 10_12_6")&&-1!==this.userAgent.indexOf("Chrome/75.0.3770.100")}}])&&e(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),r}();return new c,function(){function e(t){return e.instance||(e.instance=this),e.instance.UAInstance=new c(t),e.instance}var t=e.prototype;return t.getBrowserInfo=function(e){var t="",r="",n=e||this.UAInstance;n.isSafari?(t="safari",r=n.getSafariVersion()):n.isIE?(t=n.getIEShellType(),r=n.getIEVersion()):n.isOldEdge?(t="edgeOld",r=n.getEdgeVersion()):n.isChromiumEdge?(t="edgeChrome",r=n.getChromeVersion()):n.isFirefox?(t="firefox",r=n.getFirefoxVersion()):n.isChrome?n.isXHH?(t="xhh",r="75"):n.is360SE?(t="360Chrome",r=n.getChromeVersion()):(t="chrome",r=n.getChromeVersion()):n.isPCQQBrowser?(t="qqChrome",r=n.getQQBrowserVersion()):(t=n.getChromiumShellType(),r=n.getChromeVersion());var o=function(){if("undefined"==typeof window)return"";var e="",t=navigator.userAgent.toLowerCase();return t.indexOf("win")>-1?(e="win",/(win64|wow64|win32|wow32|windows nt)/.test(t)&&(-1!==RegExp.$1.indexOf("windows nt")?-1!=t.indexOf("windows nt 5")?e+="xp":-1!=t.indexOf("windows nt 7")?e+="7":-1!=t.indexOf("windows nt 10")&&(e+="10"):e+="-"+RegExp.$1)):/Mac OS X/.test(t)>-1?e="mac":t.indexOf("linux")>-1&&(e="linux"),e}(),i="undefined"!=typeof navigator?navigator.platform.toLowerCase():"";return{browser:{name:t,version:r},system:o,isMobile:n.isMobile,platform:i,fullname:o+"--"+i+"--"+t}},t.check=function(e){void 0===e&&(e=[]);var t=this.getBrowserInfo(),r=t.browser.name;return!(t.isMobile||""===r||0!==e.length&&!e.includes(r))},e}()}()}(Oe);var Re=Oe.exports,je="3.2.6",De=F.report.reportError,Pe=function(){function e(t){_classCallCheck(this,e);var r=t.consolelog,n=t.beforeReport;this.consolelog=void 0===r||r,this.beforeReport=n,this.beaconInstant=null,this.initReport(t)}var t;return _createClass(e,[{key:"report",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var r,n,o,i=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>1&&void 0!==i[1]?i[1]:{},n=i.length>2&&void 0!==i[2]?i[2]:"onUserAction",this.beaconInstant){e.next=5;break}return console.log("please init dtreport instant before do report"),e.abrupt("return");case 5:if(o=_objectSpread(_objectSpread({viewportWidth:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0,viewportHeight:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0},window.ATInfo.reportRouterinfo||{}),r),e.prev=6,!this.beforeReport){e.next=11;break}return e.next=10,this.beforeReport(t,o);case 10:o=e.sent;case 11:o&&(this.consolelog&&console.log("dtreport debug",t,o),this.beaconInstant["".concat(n)](t,o)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),De("beaconReport error",e.t0);case 17:case"end":return e.stop()}}),e,this,[[6,14]])}))),function(e){return t.apply(this,arguments)})},{key:"addAdditionalParams",value:function(e){var t;null===(t=this.beaconInstant)||void 0===t||t.addAdditionalParams(e)}},{key:"initReport",value:function(e){var t=e.onReportSuccess,r=e.onReportFail,n=e.commonParams,o=void 0===n?{}:n,i=e.useBeaconSDK;if(null===this.beaconInstant){this.beaconInstant=new Te({appkey:e.appkey,delay:1e3,onReportSuccess:function(e){null==t||t(e)},onReportFail:function(e){null==r||r(e)}});var a=(new Re).getBrowserInfo().fullname,s=void 0===a?"":a;this.beaconInstant.addAdditionalParams(_objectSpread({atversion:je,browser:navigator.userAgent,realua:null==s?void 0:s.replace(/--/g,"~~")},o)),"function"==typeof i&&i(this.beaconInstant)}}}]),e}(),Le={autoReportEvents:["click","show_page","stay_page"],keyUserId:"uid",showAreaDelay:1e3,scrollPageDelay:4e3,showAreaThreshold:.5,maxStaytime:18e6,ignoreQuerys:["dt-inspector"],domAttributes:[["dt-remark",{transformAttributeKey:function(e){return e.replace(/^dt-/,"")}}]]},Ne=F.route,Ue=F.common,qe=F.report.reportError,Ve=F.domElement.getVisibleEventAttr,Me=Ue.getStayTime,Be=Ue.debounce,Fe=Ne.getQueryAndParams,Qe=Ne.getRouteParams,He=Ne.extendEvent,We=Ne.splitHashAndQuery,Ge=Ne.isHashRouteChange,$e=function(){function e(t){var r=this,n=t.enableReportValue,o=t.reportConfig,i=t.dtReport;_classCallCheck(this,e),this.enableReportValue=!0,this.matchFns=[],this.pageEnterTime=0,this.pageHiddenTime=0,this.prePathname=location.pathname,this.preHash=location.hash,this.reportShowPage=function(e){var t,n,o=e.pathname,i=e.search,a=e.params,s=void 0===a?{}:a,c=e.routerExtraParams,l=void 0===c?{}:c;try{var d=(new Date).getTime();r.handleStayPage(d);var f="".concat(r.prevRouteRef.hostname||"","$$").concat(r.prevRouteRef.pathname||"","$$").concat(r.prevRouteRef.query||"");r.pageEnterTime=d;var h=location,p=h.href,m=h.hostname,v=Fe(i,s,l,r.ignoreQuerys),g=v.queryObj,y=v.routerParams,b=void 0===y?{}:y,w=u.stringify(void 0===g?{}:g),_=_objectSpread(_objectSpread({url:p,pathname:o,query:w&&"?".concat(w),hostname:m},b),{},{pagefrom:f,title:document.title});r.prevRouteRef=_,window.ATInfo.reportRouterinfo=_,r.dispatchRouterChangeEvent(),(null===(t=r.autoReportEvents)||void 0===t?void 0:t.includes("show_page"))&&r.enableReportValue&&(null===(n=r.dtReport)||void 0===n||n.call(r,"show_page"))}catch(Ct){qe("reportShowPage error",Ct)}},this.reportRouterChangeData=function(e,t){var n,o;r.prePathname=e,r.preHash=t;var i=null===(n=r.getRouterExtraParams)||void 0===n?void 0:n.call(r,location),a=We(),s=a.pathname;r.reportShowPage({pathname:s,search:a.search,params:Qe(r.matchFns,null===(o=null==s?void 0:s.split("#"))||void 0===o?void 0:o.pop()),routerExtraParams:i})},this.listenRouterChange=function(){var e=location.pathname,t=location.hash,n=Ge(r.preHash,t);(r.prePathname!==e||n)&&r.reportRouterChangeData(e,t)},this.onVisibilityChange=function(){var e=Ve().hidden,t=Date.now();(e?document[e]:null)&&(r.pageHiddenTime+=t-r.pageEnterTime),r.pageEnterTime=t},this.addRouteListener=function(){window.history.pushState=He("pushState"),window.history.replaceState=He("replaceState"),window.addEventListener("replaceState",r.listenRouterChangeDebounce,!1),window.addEventListener("pushState",r.listenRouterChangeDebounce,!1),window.addEventListener("popstate",r.listenRouterChangeDebounce,!1),window.addEventListener("hashchange",r.listenRouterChangeDebounce,!1);var e=Ve();document.addEventListener(e.visibilityChange,r.onVisibilityChange,!1)};var a=o.autoReportEvents,s=o.getRouterExtraParams,c=o.dynamicRoutes,l=o.maxStaytime,d=o.ignoreQuerys;this.enableReportValue=n,this.autoReportEvents=a,this.dtReport=i,this.getRouterExtraParams=s,this.listenRouterChangeDebounce=Be(this.listenRouterChange.bind(this),500);var f=document.referrer?We(new URL(document.referrer)):{},h=f.hostname,p=f.pathname,m=f.search;this.prevRouteRef={hostname:void 0===h?"":h,pathname:void 0===p?"":p,query:void 0===m?"":m},this.maxStaytime=l,this.ignoreQuerys=d,this.init({dynamicRoutes:c})}var t;return _createClass(e,[{key:"disconnect",value:function(){document.removeEventListener("visibilityChange",this.onVisibilityChange,!1),window.removeEventListener("replaceState",this.listenRouterChangeDebounce,!1),window.removeEventListener("pushState",this.listenRouterChangeDebounce,!1),window.removeEventListener("popstate",this.listenRouterChangeDebounce,!1),window.removeEventListener("hashchange",this.listenRouterChangeDebounce,!1),this.handleStayPage((new Date).getTime(),!0,"onSendBeacon")}},{key:"init",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var r,n,o;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.dynamicRoutes)){e.next=6;break}return e.next=4,Promise.resolve().then((function(){return st}));case 4:n=e.sent,this.matchFns=(r||[]).map((function(e){return n.match(e,{decode:decodeURIComponent})}));case 6:o=location,this.reportRouterChangeData(o.pathname,o.hash),this.addRouteListener();case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"handleStayPage",value:function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2?arguments[2]:void 0;this.enableReportValue&&0!==this.pageEnterTime&&(null===(t=this.autoReportEvents)||void 0===t?void 0:t.includes("stay_page"))&&(null===(r=this.dtReport)||void 0===r||r.call(this,"stay_page",_objectSpread(_objectSpread({},this.prevRouteRef),{},{staytime:Me(e-this.pageEnterTime+this.pageHiddenTime,this.maxStaytime),isExit:n}),o),this.pageHiddenTime=0,this.pageEnterTime=0)}},{key:"dispatchRouterChangeEvent",value:function(){if(window.CustomEvent){var e=new CustomEvent("at-router-change",{detail:{}});window.dispatchEvent(e)}}}]),e}(),Je=F.common.mergeArrays,Ke=Ie.track,ze=Ke.mergeTrackConfigs,Ye=Ke.mergeUseLibAndConfig,Xe=Ke.defaultTrackConfig,Ze=function(){function e(t){var r=this;_classCallCheck(this,e),this.reportConfig={appkey:""},this.trackConfig={},this.enableReportValue=!0,this.exposureInstantce=null,this.trackInstance=null,this.scrollInstance=null,this.extensionInstance=null,this.routerInstance=null,this.dtReport=function(){},this.addAdditionalParams=function(){},this.setDefaultConfig=function(e,t){var n,o,i,a,s=ze(Xe,t);Array.isArray(e)?e.forEach((function(e){s=Ye(e,s)})):s=Ye(e,s);var c="[".concat(s.keyEid,"]");(null===(n=r.reportConfig.autoReportEvents)||void 0===n?void 0:n.includes("click"))?null===(o=s.click)||void 0===o||o.push(c):s.click=[c];var u="[".concat(s.keyAreaId,"]");(null===(i=r.reportConfig.autoReportEvents)||void 0===i?void 0:i.includes("show_area"))?null===(a=s.area)||void 0===a||a.push(u):s.area=[u],s.reportAttributes=r.reportConfig.domAttributes,r.trackConfig=s},this.handleInitReport=function(){var e=new Pe(r.reportConfig),t=function(t,r,n){e.report(t,r,n)};r.dtReport=t,window.DTReport=t,window.OMdtReport=t,r.addAdditionalParams=function(t){var n=r.reportConfig.keyUserId;n&&t[n]&&(window.ATInfo.uid=t[n]),e.addAdditionalParams(t)}},this.handleExposure=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return vt}));case 2:r.exposureInstantce=new e.sent.default({trackConfig:r.trackConfig,reportConfig:r.reportConfig,dtReport:r.dtReport});case 4:case"end":return e.stop()}}),e)}))),this.handleClick=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return yt}));case 2:r.trackInstance=new e.sent.default({trackConfig:r.trackConfig,dtReport:r.dtReport});case 4:case"end":return e.stop()}}),e)}))),this.handleScroll=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(t=r.reportConfig.autoReportEvents)||void 0===t?void 0:t.includes("scroll_page"))){e.next=5;break}return e.next=3,Promise.resolve().then((function(){return It}));case 3:r.scrollInstance=new e.sent.default({reportConfig:r.reportConfig,dtReport:r.dtReport});case 5:case"end":return e.stop()}}),e)}))),this.getLastTimePlugins=function(){var e,t=[],n=JSON.parse((null===(e=null===window||void 0===window?void 0:window.localStorage)||void 0===e?void 0:e.getItem("".concat(r.reportConfig.appkey,"_").concat("tracker_panel_tookit_plugins")))||"{}");return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=(new Date).valueOf();return t-e<216e5}(null==n?void 0:n.time)&&(t=n.plugins),t},this.handleExtensions=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,o,i,a=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=_objectSpread({getActivePlugins:function(){return[]}},a.length>0&&void 0!==a[0]?a[0]:{}),!(null==(o=n.getActivePlugins())?void 0:o.length)&&!(null===(t=r.getLastTimePlugins())||void 0===t?void 0:t.length)){e.next=29;break}return e.prev=4,e.next=7,window.fetch("".concat(Ce,"/user/envDetect?v=").concat(je));case 7:return i=e.sent,e.next=10,i.json();case 10:if(0===e.sent.response.code){e.next=13;break}return e.abrupt("return");case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return");case 19:return e.next=21,new Promise((function(e){var t=document.createElement("script");t.onload=function(){e(window.ATExtensions)},t.src="https://ccsp.gtimg.com/ccsp/autotracker/3.0/autotracker.extensions-0.0.28.min.js",document.getElementsByTagName("head")[0].appendChild(t)}));case 21:return e.next=23,e.sent;case 23:e.t1=e.sent,e.t2=r.trackConfig,e.t3=r.reportConfig,e.t4=n,e.t5=je,r.extensionInstance=new e.t1(e.t2,e.t3,e.t4,e.t5);case 29:case"end":return e.stop()}}),e,null,[[4,15]])}))),this.leaving=function(){var e,t,n,o,i;null===(e=r.trackInstance)||void 0===e||e.disconnect(),null===(t=r.exposureInstantce)||void 0===t||t.disconnect(),null===(n=r.scrollInstance)||void 0===n||n.disconnect(),null===(o=r.extensionInstance)||void 0===o||o.disconnect(),null===(i=r.routerInstance)||void 0===i||i.disconnect()},this.handleEventListener=function(){window.addEventListener("beforeunload",r.disconnect)};var n,o,i,a,s,c,u,l,d=e,f=t.report,h=f.appkey,p=f.enableReport,m=void 0===p?function(){return!0}:p;return d[h]||(this.appkey=h,this.reportConfig=(o=t.report,i=(n=Le).ignoreQuerys,a=n.domAttributes,s=_objectWithoutProperties(n,_excluded2),c=o.ignoreQuerys,u=o.domAttributes,l=_objectWithoutProperties(o,_excluded3),_objectSpread(_objectSpread({ignoreQuerys:Je(i,c),domAttributes:Je(a,u)},s),l)),this.enableReportValue=m(),this.disconnect=this.leaving.bind(this),this.init(t),d[h]=this),d[h]}var t;return _createClass(e,[{key:"destroy",value:function(){this.leaving(),window.removeEventListener("beforeunload",this.disconnect),e[this.appkey]=null}},{key:"init",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var r,n,o,i,a,s,c;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.inspector,a=(i=this.reportConfig).keyUserId,c=void 0===(s=i.commonParams)?{}:s,this.setDefaultConfig(void 0===(n=t.uselib)?"":n,void 0===(r=t.track)?{}:r),window.DTReport=function(){},window.OMdtReport=function(){},window.ATInfo={sdkVersion:je,uid:a?c[a]:""},!this.enableReportValue){e.next=9;break}return e.next=9,this.handleInitReport();case 9:if(this.routerInstance=new $e({reportConfig:this.reportConfig,dtReport:this.dtReport,enableReportValue:this.enableReportValue}),!this.enableReportValue){e.next=17;break}return e.next=13,this.handleExposure();case 13:return e.next=15,this.handleClick();case 15:return e.next=17,this.handleScroll();case 17:this.handleExtensions(o),this.handleEventListener();case 19:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();function et(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)t.push({type:"CHAR",index:r,value:e[r++]});else{var o=1,i="";if("?"===e[s=r+1])throw new TypeError('Pattern cannot start with "?" at '.concat(s));for(;s<e.length;)if("\\"!==e[s]){if(")"===e[s]){if(0==--o){s++;break}}else if("("===e[s]&&(o++,"?"!==e[s+1]))throw new TypeError("Capturing groups are not allowed at ".concat(s));i+=e[s++]}else i+=e[s++]+e[s++];if(o)throw new TypeError("Unbalanced pattern at ".concat(r));if(!i)throw new TypeError("Missing pattern at ".concat(r));t.push({type:"PATTERN",index:r,value:i}),r=s}else{for(var a="",s=r+1;s<e.length;){var c=e.charCodeAt(s);if(!(c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||95===c))break;a+=e[s++]}if(!a)throw new TypeError("Missing parameter name at ".concat(r));t.push({type:"NAME",index:r,value:a}),r=s}else t.push({type:"CLOSE",index:r,value:e[r++]});else t.push({type:"OPEN",index:r,value:e[r++]});else t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});else t.push({type:"MODIFIER",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),n=t.prefixes,o=void 0===n?"./":n,i="[^".concat(nt(t.delimiter||"/#?"),"]+?"),a=[],s=0,c=0,u="",l=function(e){if(c<r.length&&r[c].type===e)return r[c++].value},d=function(e){var t=l(e);if(void 0!==t)return t;var n=r[c],o=n.index;throw new TypeError("Unexpected ".concat(n.type," at ").concat(o,", expected ").concat(e))},f=function(){for(var e,t="";e=l("CHAR")||l("ESCAPED_CHAR");)t+=e;return t};c<r.length;){var h=l("CHAR"),p=l("NAME"),m=l("PATTERN");if(p||m){-1===o.indexOf(g=h||"")&&(u+=g,g=""),u&&(a.push(u),u=""),a.push({name:p||s++,prefix:g,suffix:"",pattern:m||i,modifier:l("MODIFIER")||""})}else{var v=h||l("ESCAPED_CHAR");if(v)u+=v;else if(u&&(a.push(u),u=""),l("OPEN")){var g=f(),y=l("NAME")||"",b=l("PATTERN")||"",w=f();d("CLOSE"),a.push({name:y||(b?s++:""),pattern:y&&!b?i:b,prefix:g,suffix:w,modifier:l("MODIFIER")||""})}else d("END")}}return a}function tt(e,t){void 0===t&&(t={});var r=ot(t),n=t.encode,o=void 0===n?function(e){return e}:n,i=t.validate,a=void 0===i||i,s=e.map((function(e){if("object"===_typeof(e))return new RegExp("^(?:".concat(e.pattern,")$"),r)}));return function(t){for(var r="",n=0;n<e.length;n++){var i=e[n];if("string"!=typeof i){var c=t?t[i.name]:void 0,u="?"===i.modifier||"*"===i.modifier,l="*"===i.modifier||"+"===i.modifier;if(Array.isArray(c)){if(!l)throw new TypeError('Expected "'.concat(i.name,'" to not repeat, but got an array'));if(0===c.length){if(u)continue;throw new TypeError('Expected "'.concat(i.name,'" to not be empty'))}for(var d=0;d<c.length;d++){var f=o(c[d],i);if(a&&!s[n].test(f))throw new TypeError('Expected all "'.concat(i.name,'" to match "').concat(i.pattern,'", but got "').concat(f,'"'));r+=i.prefix+f+i.suffix}}else if("string"!=typeof c&&"number"!=typeof c){if(!u){var h=l?"an array":"a string";throw new TypeError('Expected "'.concat(i.name,'" to be ').concat(h))}}else{f=o(String(c),i);if(a&&!s[n].test(f))throw new TypeError('Expected "'.concat(i.name,'" to match "').concat(i.pattern,'", but got "').concat(f,'"'));r+=i.prefix+f+i.suffix}}else r+=i}return r}}function rt(e,t,r){void 0===r&&(r={});var n=r.decode,o=void 0===n?function(e){return e}:n;return function(r){var n=e.exec(r);if(!n)return!1;for(var i=n[0],a=n.index,s=Object.create(null),c=function(e){if(void 0===n[e])return"continue";var r=t[e-1];s[r.name]="*"===r.modifier||"+"===r.modifier?n[e].split(r.prefix+r.suffix).map((function(e){return o(e,r)})):o(n[e],r)},u=1;u<n.length;u++)c(u);return{path:i,index:a,params:s}}}function nt(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function ot(e){return e&&e.sensitive?"":"i"}function it(e,t,r){void 0===r&&(r={});for(var n=r.strict,o=void 0!==n&&n,i=r.start,a=void 0===i||i,s=r.end,c=void 0===s||s,u=r.encode,l=void 0===u?function(e){return e}:u,d=r.delimiter,f=void 0===d?"/#?":d,h=r.endsWith,p="[".concat(nt(void 0===h?"":h),"]|$"),m="[".concat(nt(f),"]"),v=a?"^":"",g=0,y=e;g<y.length;g++){var b=y[g];if("string"==typeof b)v+=nt(l(b));else{var w=nt(l(b.prefix)),_=nt(l(b.suffix));if(b.pattern)if(t&&t.push(b),w||_)if("+"===b.modifier||"*"===b.modifier){var S="*"===b.modifier?"?":"";v+="(?:".concat(w,"((?:").concat(b.pattern,")(?:").concat(_).concat(w,"(?:").concat(b.pattern,"))*)").concat(_,")").concat(S)}else v+="(?:".concat(w,"(").concat(b.pattern,")").concat(_,")").concat(b.modifier);else v+="+"===b.modifier||"*"===b.modifier?"((?:".concat(b.pattern,")").concat(b.modifier,")"):"(".concat(b.pattern,")").concat(b.modifier);else v+="(?:".concat(w).concat(_,")").concat(b.modifier)}}if(c)o||(v+="".concat(m,"?")),v+=r.endsWith?"(?=".concat(p,")"):"$";else{var E=e[e.length-1],x="string"==typeof E?m.indexOf(E[E.length-1])>-1:void 0===E;o||(v+="(?:".concat(m,"(?=").concat(p,"))?")),x||(v+="(?=".concat(m,"|").concat(p,")"))}return new RegExp(v,ot(r))}function at(e,t,r){return e instanceof RegExp?function(e,t){if(!t)return e;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,o=r.exec(e.source);o;)t.push({name:o[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),o=r.exec(e.source);return e}(e,t):Array.isArray(e)?function(e,t,r){var n=e.map((function(e){return at(e,t,r).source}));return new RegExp("(?:".concat(n.join("|"),")"),ot(r))}(e,t,r):function(e,t,r){return it(et(e,r),t,r)}(e,t,r)}var st=Object.freeze({__proto__:null,parse:et,compile:function(e,t){return tt(et(e,t),t)},tokensToFunction:tt,match:function(e,t){var r=[];return rt(at(e,r,t),r,t)},regexpToFunction:rt,tokensToRegexp:it,pathToRegexp:at}),ct=Ie.track.trackExposeDom,ut=Ie.domObserver,lt=F.report.reportError,dt=F.common.getStayTime,ft=(0,F.domElement.getVisibleEventAttr)(),ht=ft.visibilityChange,pt=ft.hidden,mt=function(){function e(t){var r,n=t.trackConfig,o=t.reportConfig,i=t.dtReport;_classCallCheck(this,e),this.trackConfig=n,this.reportConfig=o,this.targetDataArr=[],this.hiddenMoment=0,this.showMoment=0,this.newObserver(),this.dtReport=i,this.autoStayArea=(null===(r=null==o?void 0:o.autoReportEvents)||void 0===r?void 0:r.includes("stay_area"))||!1,this.handleVisibility=this.pageVisiblityChange.bind(this),this.handlePage=this.handlePageChange.bind(this),this.handleEventListener()}return _createClass(e,[{key:"disconnect",value:function(){this.removeData(!0),window.removeEventListener(ht,this.handleVisibility),window.removeEventListener("at-router-change",this.handlePage)}},{key:"newObserver",value:function(){var e=this;this.observerInstance=new ut({selectors:this.trackConfig.area||[],showAreaThreshold:this.reportConfig.showAreaThreshold,onEnterView:function(t){return e.onEnterView(t)},onLeaveView:function(t){return e.onLeaveView(t)}})}},{key:"handlePageChange",value:function(){this.removeData(),this.newObserver()}},{key:"removeData",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=this.observerInstance)||void 0===e||e.disconnect();for(var r=this.targetDataArr.length,n=0;n<r;n++)this.reportStay({index:n,needBeacon:t,needDelete:!1});this.targetDataArr=[]}},{key:"getNow",value:function(){return(new Date).getTime()}},{key:"pageVisiblityChange",value:function(){var e=this,t=pt?document[pt]:null,r=this.getNow();try{Object.entries(this.targetDataArr).forEach((function(n){var o=_slicedToArray(n,2),i=o[0],a=o[1].hiddenTime,s=void 0===a?0:a;t?(e.hiddenMoment=r,e.showMoment=0):e.hiddenMoment&&(s=s+r-e.hiddenMoment,e.showMoment=r),e.targetDataArr[i].hiddenTime=s}))}catch(Ct){lt("expose pageVisiblityChange error",Ct)}}},{key:"onEnterView",value:function(e){var t=this;if(!this.targetDataArr.find((function(t){return t.target===e}))){var r={target:e,enterMoment:this.getNow(),routeInfo:_objectSpread({},window.ATInfo.reportRouterinfo)};r.timer=window.setTimeout((function(){try{if(r.timer){var n=ct(e,t.trackConfig);n&&(r.areaParam=n,t.dtReport("show_area",n)),window.clearTimeout(r.timer),delete r.timer}}catch(Ct){lt("expose onEnterView error",Ct)}}),this.reportConfig.showAreaDelay),this.targetDataArr.push(r)}}},{key:"onLeaveView",value:function(e){var t=this.targetDataArr.findIndex((function(t){return t.target===e}));t>-1&&this.reportStay({index:t})}},{key:"reportStay",value:function(e){var t,r=e.index,n=e.needBeacon,o=void 0!==n&&n,i=e.needDelete,a=void 0===i||i;try{var s=this.targetDataArr[r],c=s.target,u=s.enterMoment,l=s.hiddenTime,d=void 0===l?0:l,f=s.areaParam,h=s.timer,p=s.routeInfo,m=s.hasReportStay,v=this.getNow();if(h)return window.clearTimeout(h),void(a&&this.targetDataArr.splice(r,1));var g=d;!this.showMoment&&this.hiddenMoment&&(g=d+v-this.hiddenMoment),this.autoStayArea&&!m&&this.dtReport("stay_area",_objectSpread(_objectSpread({staytime:dt(v-u-g,this.reportConfig.maxStaytime)},f),p),o?"onSendBeacon":"onUserAction"),s.hasReportStay=!0,null===(t=this.observerInstance)||void 0===t||t.unobserveTarget(c)}catch(Ct){lt("expose reportStay error",Ct)}}},{key:"handleEventListener",value:function(){window.addEventListener(ht,this.handleVisibility),window.addEventListener("at-router-change",this.handlePage)}}]),e}(),vt=Object.freeze({__proto__:null,default:mt}),gt=Ie.track.trackClickDom,yt=Object.freeze({__proto__:null,default:function(){function e(t){var r=t.trackConfig,n=t.dtReport;_classCallCheck(this,e),this.trackConfig={},this.trackConfig=r,this.dtReport=n,this.handlerClickThis=this.handlerClick.bind(this),document.addEventListener("mousedown",this.handlerClickThis,!1)}return _createClass(e,[{key:"disconnect",value:function(){document.removeEventListener("mousedown",this.handlerClickThis,!1)}},{key:"handlerClick",value:function(e){var t=gt(e,this.trackConfig);t&&this.dtReport("click",t)}}]),e}()}),bt=F.common,wt=bt.throttle,_t=bt.getStayTime,St=(0,F.domElement.getVisibleEventAttr)(),Et=St.visibilityChange,xt=St.hidden,kt=function(){function e(t){var r=t.reportConfig,n=t.dtReport;_classCallCheck(this,e),this.scrollPageDelay=r.scrollPageDelay,this.dtReport=n,this.scrollTime=this.getNow(),this.scrollY=this.getScrollY(),this.routeInfo=_objectSpread({},window.ATInfo.reportRouterinfo),this.maxStaytime=r.maxStaytime,this.handleScroll=wt(this.scrollChange.bind(this),300),this.handleVisibility=this.pageVisiblityChange.bind(this),this.handlePage=this.handlePageChange.bind(this),this.handleEventListener()}return _createClass(e,[{key:"disconnect",value:function(){this.scrollChange(!0),window.removeEventListener("scroll",this.handleScroll),window.removeEventListener(Et,this.handleVisibility),window.removeEventListener("at-router-change",this.handlePage)}},{key:"pageVisiblityChange",value:function(){(xt?document[xt]:null)?this.scrollChange():this.scrollTime=this.getNow()}},{key:"getScrollY",value:function(){var e;return(null===(e=document.documentElement)||void 0===e?void 0:e.scrollTop)||window.pageYOffset||document.body.scrollTop||0}},{key:"getNow",value:function(){return(new Date).getTime()}},{key:"scrollChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getNow(),r=t-this.scrollTime;r>=this.scrollPageDelay&&this.dtReport("scroll_page",_objectSpread({scrollY:this.scrollY,staytime:_t(r,this.maxStaytime)},this.routeInfo),e?"onSendBeacon":"onUserAction"),this.scrollTime=t,this.scrollY=this.getScrollY()}},{key:"handlePageChange",value:function(){this.scrollChange(),this.routeInfo=_objectSpread({},window.ATInfo.reportRouterinfo)}},{key:"handleEventListener",value:function(){window.addEventListener("scroll",this.handleScroll),window.addEventListener(Et,this.handleVisibility),window.addEventListener("at-router-change",this.handlePage)}}]),e}(),It=Object.freeze({__proto__:null,default:kt});return Ze}));
